(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[785],{90300:function(e,r,t){"use strict";t.r(r),t.d(r,{__N_SSP:function(){return aa},default:function(){return sa}});var n={};t.r(n),t.d(n,{signupFlow:function(){return K},signupFlowEmail:function(){return Z},signupFlowIdp:function(){return B}});var o={};t.r(o),t.d(o,{signupFlow:function(){return q},signupFlowEmail:function(){return le},signupFlowIdp:function(){return Mn}});var i={};t.r(i),t.d(i,{signupFlow:function(){return Hn},signupFlowEmail:function(){return Bn},signupFlowIdp:function(){return Kn}});var a={};t.r(a),t.d(a,{signupFlow:function(){return qi},signupFlowEmail:function(){return Xi},signupFlowIdp:function(){return Qi}});var s=t(59499),c=t(17545),u=t(67294),l=t(85893),d=t(11163),p=function(e,r,t){return{pathname:e,query:r,hash:(n=t,void 0===n||null===n?void 0:String(t))};var n},_=function(e){return new URLSearchParams(Object.entries(e)).toString()},f=function(){var e=function(){var e=(0,d.useRouter)(),r=e.asPath,t=e.push,n=e.replace,o=e.pathname,i=e.query,a=(0,u.useCallback)((function(e){return t(p(o,i,e))}),[t,o,i]),s=(0,u.useCallback)((function(e){return n(p(o,i,e))}),[n,o,i]);return{hash:(0,u.useMemo)((function(){return function(e){var r=e.split("#");if(!(r.length<2))return r[1]}(r)}),[r]),push:a,replace:s}}(),r=e.hash,t=e.push,n=e.replace;return{query:(0,u.useMemo)((function(){return function(e){return Object.fromEntries(new URLSearchParams(e).entries())}(r)}),[r]),push:(0,u.useCallback)((function(e){return t(_(e))}),[t]),replace:(0,u.useCallback)((function(e){return n(_(e))}),[n])}},y=function(e){return function(r){var t=(0,u.useContext)(e);if(!t)throw new Error("usePublish must be used within a EventsProvider");var n=t.subscribe,o=function(e){var r=(0,u.useRef)(e);return(0,u.useEffect)((function(){r.current=e})),r}(r),i=(0,u.useRef)();i.current||(i.current=n(o.current)),(0,u.useEffect)((function(){return i.current}),[])}};function E(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function h(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?E(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):E(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function O(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function I(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?O(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var m,v=function(){var e=(0,u.createContext)(null),r=function(e){return function(r){var t=r.children,n=r.callbackForTesting,o=(0,u.useMemo)((function(){return function(){var e=[];return{publish:function(r){e.forEach((function(e){return e(r)}))},subscribe:function(r){return e.push(r),function(){e.splice(e.indexOf(r),1)}},dispose:function(){e.length=0}}}()}),[]),i=(0,u.useRef)();return n&&!i.current&&(i.current=o.subscribe(n)),(0,u.useEffect)((function(){return i.current}),[]),(0,l.jsx)(e.Provider,{value:o,children:t})}}(e),t=function(e){return function(){var r=(0,u.useContext)(e);if(!r)throw new Error("usePublish must be used within a EventsProvider");return r.publish}}(e);return{EventsProvider:r,usePublish:t,useSubscribe:y(e)}}(),g=v.EventsProvider,b=v.usePublish,S=v.useSubscribe,w=t(97224),N=t(33677),P=(t(59416),t(17943)),R=t(50029),L=t(87794),A=t.n(L),F=t(47582),D=t(63770),j=t(36105),C=t.n(j),x=t(76489),T=t(1473);function U(){return(U=(0,R.Z)(A().mark((function e(r){var t,n,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,m||(t=x.parse(document.cookie),n=t.sp_t,o=[(0,D.createCorrelationIdContext)(n)],m=(0,F.mi)({transport:T.t,context:o})),e.next=4,m.send(r);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),C().error("Error sending ".concat(r.name," event:"),e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))).apply(this,arguments)}var M;!function(e){e.STEP_IMPRESSION="step_impression",e.STEP_BACK="step_back",e.STEP_COMPLETED="step_completed",e.STEP_ERROR="step_error",e.MARKET_MISMATCH="market_mismatch",e.MARKET_MISMATCH_FOLLOW="market_mismatch_follow",e.MARKET_MISMATCH_DISMISS="market_mismatch_dismiss"}(M||(M={}));var k,G,W=function(e){var r=e.action,t=e.payload,n=e.stepIndex,o=e.flow,i=e.destinationUrl,a=e.flowId;return function(e){return U.apply(this,arguments)}((0,P.j)({action:r,payload:t,step_index:n,flow:o,destination_url:i,flow_id:a}))},Z=function(e,r){var t=r.destinationUrl,n=r.flowId,o=r.flow||void 0;switch(e.type){case"SIGNUP_FLOW_EMAIL_FORM_STEP":var i=e.payload,a=i.stepIndex,s=i.previousStepIndex;return void 0!==s&&a<s&&W({action:M.STEP_BACK,stepIndex:a,flow:o,destinationUrl:t,flowId:n}),void W({action:M.STEP_IMPRESSION,stepIndex:a,flow:o,destinationUrl:t,flowId:n});case"SIGNUP_FLOW_EMAIL_FORM_STEP_COMPLETED":var c=e.payload.stepIndex;return void W({action:M.STEP_COMPLETED,stepIndex:c,flow:o,destinationUrl:t,flowId:n});case"SIGNUP_FLOW_EMAIL_FORM_STEP_ERROR":var u=e.payload.stepIndex;return void W({action:M.STEP_ERROR,payload:e.payload.invalidFields.join(","),stepIndex:u,flow:o,destinationUrl:t,flowId:n});default:return}},B=function(e,r){var t=r.destinationUrl,n=r.flowId,o=r.flow||void 0;switch(e.type){case"SIGNUP_FLOW_IDP_FORM_STEP":var i=e.payload,a=i.stepIndex,s=i.previousStepIndex;return void 0!==s&&a<s&&W({action:M.STEP_BACK,stepIndex:a,flow:o,destinationUrl:t,flowId:n}),void W({action:M.STEP_IMPRESSION,stepIndex:a,flow:o,destinationUrl:t,flowId:n});case"SIGNUP_FLOW_IDP_FORM_STEP_COMPLETED":var c=e.payload.stepIndex;return void W({action:M.STEP_COMPLETED,stepIndex:c,flow:o,destinationUrl:t,flowId:n});case"SIGNUP_FLOW_IDP_FORM_STEP_ERROR":var u=e.payload.stepIndex;return void W({action:M.STEP_ERROR,payload:e.payload.invalidFields.join(","),stepIndex:u,flow:o,destinationUrl:t,flowId:n});default:return}},K=function(e,r){var t=r.flowId,n=r.destinationUrl,o=r.flow||void 0;switch(e.type){case"SIGNUP_FLOW_MARKET_MISMATCH":var i=e.payload,a=i.countryCode,s=i.geoCountry;return void W({action:M.MARKET_MISMATCH,payload:[a,s].join(","),destinationUrl:n,flowId:t,flow:o});case"SIGNUP_FLOW_MARKET_MISMATCH_FOLLOW":var c=e.payload,u=c.countryCode,l=c.geoCountry;return void W({action:M.MARKET_MISMATCH_FOLLOW,payload:[u,l].join(","),destinationUrl:n,flowId:t,flow:o});case"SIGNUP_FLOW_MARKET_MISMATCH_DISMISS":var d=e.payload,p=d.countryCode,_=d.geoCountry;return void W({action:M.MARKET_MISMATCH_DISMISS,payload:[p,_].join(","),destinationUrl:n,flowId:t,flow:o});default:return}},H=function(e){var r=e.children,t=(0,w.et)(),o=t.forwardUrl,i=t.flowId,a={flow:t.flow,flowId:i,destinationUrl:(0,N.Z)(o)};return S((function(e){return function(e,r){return Object.values(n).forEach((function(t){return t(e,r)}))}(e,a)})),(0,l.jsx)(u.Fragment,{children:r})},V=t(706),Y=t(58720),q=function(e,r){var t=r.destinationUrl,n=r.flowId,o=r.referrer;switch(e.type){case"SIGNUP_FLOW_IMPRESSION":return void(0,V.ak)(o,Y.YW.NONE,t,n);case"SIGNUP_FLOW_FACEBOOK_BUTTON_HIT":return void(0,V.ZY)(o,Y.Rb.FACEBOOK_IDP,t,n);case"SIGNUP_FLOW_GOOGLE_BUTTON_HIT":return void(0,V.ZY)(o,Y.Rb.GOOGLE,t,n);default:return}},$=t(99374),z=t(6520),X=t(96426);function J(){return(J=(0,R.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,z.sendWwwWebFraudLogsNonAuth)({category:G.LOAD}),(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:G.LOAD,value:1})]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=(0,R.Z)(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,z.sendWwwWebFraudLogsNonAuth)({category:G.LOAD_FAIL,label:r}),(0,X.s)({metric_type:$.MetricTypes.COUNTER,tags:{message:r},what:G.LOAD_FAIL,value:1})]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return re.apply(this,arguments)}function re(){return(re=(0,R.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,z.sendWwwWebFraudLogsNonAuth)({action:k.INVALID_REGISTRATION,category:G.SIGNUP_SERVICE_ERROR});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=(0,R.Z)(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,z.sendWwwWebFraudLogsNonAuth)({action:k.INVALID_REGISTRATION,category:G.NETWORK_ERROR,label:r.message}),(0,X.s)({metric_type:$.MetricTypes.COUNTER,tags:{message:r.message},what:G.NETWORK_ERROR,value:1})]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=(0,R.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,z.sendWwwWebFraudLogsNonAuth)({category:G.PAGEVIEW}),(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:G.PAGEVIEW,value:1})]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ie(){return(ie=(0,R.Z)(A().mark((function e(){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,z.sendWwwWebFraudLogsNonAuth)({action:k.CLICK,category:G.FORM_SUBMISSION}),(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:G.FORM_SUBMISSION,value:1})]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ae(){return(ae=(0,R.Z)(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,z.sendWwwWebFraudLogsNonAuth)({action:k.CLICK,category:G.CONFIRM_FORM_SUBMISSION,label:r,tags:{action:k.CLICK,category:G.CONFIRM_FORM_SUBMISSION,type:r}})]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function se(){return(se=(0,R.Z)(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,z.sendWwwWebFraudLogsNonAuth)({action:k.INVALID_FORM,label:r}),(0,X.s)({metric_type:$.MetricTypes.COUNTER,tags:{invalidFields:r},what:k.INVALID_FORM,value:1})]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ce(){return(ce=(0,R.Z)(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,z.sendWwwWebFraudLogsNonAuth)({action:k.INVALID_CONFIRM_FORM,label:r}),(0,X.s)({metric_type:$.MetricTypes.COUNTER,tags:{invalidFields:r},what:k.INVALID_CONFIRM_FORM,value:1})]);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){e.CLICK="click",e.INVALID_CONFIRM_FORM="invalid_confirm_form",e.INVALID_FORM="invalid_form",e.INVALID_REGISTRATION="invalid_registration",e.UNEXPECTED_PASS_FAIL="recaptcha-pass-fail"}(k||(k={})),function(e){e.ASSESSMENT="recaptcha_assessment",e.ASSESSMENT_FAIL="assessment_fail",e.CONFIRM_FORM_SUBMISSION="confirm_form_submission",e.EXPIRATION="expiration",e.FORM_SUBMISSION="form_submission",e.INVALID_TOKEN="invalid_token",e.LOAD="recaptcha_load",e.LOAD_FAIL="load_fail",e.MISSING_TOKEN="missing_token",e.NETWORK_ERROR="network_error",e.PAGEVIEW="signup_form",e.SIGNUP_SERVICE_ERROR="signup_service_error",e.SUCCESS="recaptcha_successful"}(G||(G={}));var ue,le=function(e,r){var t=r.destinationUrl,n=r.flowId,o=r.referrer;switch(e.type){case"SIGNUP_FLOW_EMAIL_FIELD_FOCUSSED":return void(0,V.jJ)(e.id,t,n);case"SIGNUP_FLOW_EMAIL_BIRTHDATE_FIELD_FOCUSSED":var i={day:"birth_day",month:"birth_month",year:"birth_year"}[e.payload.field];return void(0,V.jJ)(i,t,n);case"SIGNUP_FLOW_EMAIL_FORM_STEP_ERROR":return void function(e){se.apply(this,arguments)}(e.payload.invalidFields.join(","));case"SIGNUP_FLOW_EMAIL_FORM_STEP_SUBMIT":var a=e.payload;return void(a.stepIndex===a.stepsLength-1&&function(){ie.apply(this,arguments)}());case"SIGNUP_FLOW_EMAIL_ALREADY_IN_USE_LOGIN_CLICK":return void(0,V.kN)(Y.Nr.EMAIL_ERROR_MESSAGE,t,n);case"SIGNUP_FLOW_EMAIL_PHONE_NUMBER_LINK_CLICK":return void(0,V.ZY)(o,Y.Rb.PHONE_NUMBER,t,n);default:return}},de=t(16835),pe=t(82262),_e=t(92777),fe=t(10748),ye=t(81531),Ee=t(63553),he=t(37247),Oe=t(46576),Ie=t(4106),me=t(47491),ve=t(84105),ge=t(28786),be=t(27258),Se=t(63144),we=t.n(Se),Ne=t(77928),Pe=t(92946);function Re(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}!function(e){e[e.OK=1]="OK",e[e.UNKNOWN_ERROR=5]="UNKNOWN_ERROR",e[e.EMAIL_IS_ALREADY_IN_USE=20]="EMAIL_IS_ALREADY_IN_USE",e[e.FACEBOOK_EMAIL_IS_ALREADY_IN_USE=21]="FACEBOOK_EMAIL_IS_ALREADY_IN_USE",e[e.INVALID_FORM_DATA=100]="INVALID_FORM_DATA",e[e.INVALID_COUNTRY=120]="INVALID_COUNTRY",e[e.EMAIL_IS_NOT_VALID=130]="EMAIL_IS_NOT_VALID",e[e.USER_IS_TOO_YOUNG=200]="USER_IS_TOO_YOUNG",e[e.USERNAME_HAS_SPACE=220]="USERNAME_HAS_SPACE",e[e.USERNAME_HAS_FORBIDDEN_CHARACTERS=230]="USERNAME_HAS_FORBIDDEN_CHARACTERS",e[e.USERNAME_IS_ALREADY_IN_USE=240]="USERNAME_IS_ALREADY_IN_USE",e[e.USERNAME_IS_EMPTY=250]="USERNAME_IS_EMPTY",e[e.USER_IN_DATA_CENTER=320]="USER_IN_DATA_CENTER"}(ue||(ue={}));"".concat((0,Ne.b)().apiBase).concat("/signup/public/v1/account");function Le(e){var r=function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Re(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Re(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},e.request);return(0,Pe.Z)(r)}function Ae(e,r){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,R.Z)(A().mark((function e(r,t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,we()(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:Le(t)});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var De,je,Ce,xe,Te=function(){var e=(0,R.Z)(A().mark((function e(r,t,n,o){var i,a;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ae(r,{request:t});case 3:if((i=e.sent).ok){e.next=8;break}return e.next=7,Promise.all([(0,V.B_)(i.status.toString(),n,o,"failed-response"),ee()]);case 7:case 19:return e.abrupt("return",null);case 8:return e.next=10,i.json();case 10:return(a=e.sent).status!==ue.OK&&(0,V.B_)(a.status.toString(),n,o),e.abrupt("return",a);case 15:return e.prev=15,e.t0=e.catch(0),e.next=19,Promise.all([(0,V.UB)(e.t0.message,n,o),te(e.t0)]);case 20:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(r,t,n,o){return e.apply(this,arguments)}}();function Ue(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,he.Z)(e);if(r){var o=(0,he.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,Ee.Z)(this,t)}}!function(e){e.PENDING="pending",e.SUCCESS="success",e.ERROR="error"}(De||(De={})),function(e){e.FACEBOOK="facebook",e.GOOGLE="google",e.PHONE="phone"}(je||(je={})),function(e){e.MALE="male",e.FEMALE="female",e.NEUTRAL="neutral"}(Ce||(Ce={})),function(e){e.UNKNOWN="unknown",e.MISSING="missing",e.EMAIL_ALREADY_REGISTERED="email_already_registered",e.INVALID_PROVIDER="invalid_provider",e.DECODING_FAILED="decoding_failed"}(xe||(xe={}));var Me,ke,Ge,We=function(e){(0,ye.Z)(t,e);var r=Ue(t);function t(e){var n;return(0,_e.Z)(this,t),n=r.call(this,"IdTokenError: ".concat(e)),(0,s.Z)((0,fe.Z)(n),"code",void 0),n.code=e,n}return(0,pe.Z)(t)}((0,Oe.Z)(Error)),Ze=Object.values(je),Be=function(){var e=(0,R.Z)(A().mark((function e(r,t){var n,o,i,a,s,c,u,l,d,p,_,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/signup/validate_jwt",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:(0,Pe.Z)({token:r,flowId:t})});case 2:if((p=e.sent).ok){e.next=5;break}throw new We(xe.DECODING_FAILED);case 5:return e.next=7,p.json();case 7:if(_=e.sent,f=null!==(n=null===_||void 0===_?void 0:_.method)&&void 0!==n?n:null,"string"===typeof(y=f)&&Ze.includes(y)){e.next=11;break}throw new We(xe.INVALID_PROVIDER);case 11:return e.abrupt("return",{provider:f,birthdate:null!==(o=null===_||void 0===_?void 0:_.birthdate)&&void 0!==o?o:null,email:null!==(i=null===_||void 0===_?void 0:_.email)&&void 0!==i?i:null,emailAlreadyRegistered:null!==(a=null===_||void 0===_?void 0:_.email_already_registered)&&void 0!==a?a:null,gender:null!==(s=null===_||void 0===_?void 0:_.gender)&&void 0!==s?s:null,identifierToken:null!==(c=null===_||void 0===_?void 0:_.identifier_token)&&void 0!==c?c:null,name:null!==(u=null===_||void 0===_?void 0:_.name)&&void 0!==u?u:null,phoneNumber:null!==(l=null===_||void 0===_?void 0:_.phone_number)&&void 0!==l?l:null,phoneNumberVerified:null!==(d=null===_||void 0===_?void 0:_.phone_number_verified)&&void 0!==d?d:null});case 12:case"end":return e.stop()}var y}),e)})));return function(r,t){return e.apply(this,arguments)}}(),Ke=function(){var e=(0,R.Z)(A().mark((function e(r,t,n){var o,i,a,s;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&r){e.next=2;break}return e.abrupt("return",{status:De.ERROR,error:xe.MISSING,data:null});case 2:return e.prev=2,e.next=5,Be(r,n);case 5:if(o=e.sent,i=o.email,!(a=o.emailAlreadyRegistered)){e.next=9;break}return e.abrupt("return",{status:De.ERROR,data:null,error:xe.EMAIL_ALREADY_REGISTERED});case 9:if(!i||a){e.next=15;break}return e.next=12,Tn(i);case 12:if(e.sent===ue.OK){e.next=15;break}return e.abrupt("return",{status:De.ERROR,data:null,error:xe.EMAIL_ALREADY_REGISTERED});case 15:return e.abrupt("return",{status:De.SUCCESS,data:o,error:null});case 18:return e.prev=18,e.t0=e.catch(2),s=e.t0 instanceof We?e.t0.code:xe.UNKNOWN,e.abrupt("return",{status:De.ERROR,data:null,error:s});case 22:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(r,t,n){return e.apply(this,arguments)}}(),He={status:De.PENDING,error:null,data:null},Ve=function(e){switch(e){case je.FACEBOOK:return Y.Rb.FACEBOOK_IDP;case je.GOOGLE:return Y.Rb.GOOGLE;case je.PHONE:return Y.Rb.PHONE_NUMBER;default:throw new We(xe.INVALID_PROVIDER)}},Ye=function(){return(0,w.et)().countryGroup},qe=function(){var e=(0,w.et)().signupFlags;return(0,u.useMemo)((function(){return{canAcceptLicensesInOneStep:e.can_accept_licenses_in_one_step,canUsePhoneNumber:e.can_use_phone_number,privacyPolicyAcceptance:e.privacy_policy_acceptance,requiresMarketingOptIn:e.requires_marketing_opt_in,requiresMarketingOptInText:e.requires_marketing_opt_in_text,showCollectPersonalInfo:e.show_collect_personal_info,specificLicenses:e.specific_licenses,spotifyMarketingMessagesOption:e.spotify_marketing_messages_option,termsConditionsAcceptance:e.terms_conditions_acceptance,useNonBinary:e.use_non_binary,useOtherGender:e.use_other_gender,usePreferNotToSayGender:e.use_prefer_not_to_say_gender}}),[e.can_accept_licenses_in_one_step,e.can_use_phone_number,e.privacy_policy_acceptance,e.requires_marketing_opt_in,e.requires_marketing_opt_in_text,e.show_collect_personal_info,e.specific_licenses,e.spotify_marketing_messages_option,e.terms_conditions_acceptance,e.use_non_binary,e.use_other_gender,e.use_prefer_not_to_say_gender])},$e=function(){return(0,w.et)().market},ze=function(){return(0,w.et)().endianness},Xe=function(){var e=(0,w.et)().minimumAge;return parseInt(e,10)||0};!function(e){e.NONE="none",e.OPT_IN="opt_in",e.OPT_OUT="opt_out"}(Me||(Me={})),function(e){e.EXPLICIT="explicit",e.IMPLICIT="implicit"}(ke||(ke={})),function(e){e.EXPLICIT="explicit",e.IMPLICIT="implicit",e.NON="non"}(Ge||(Ge={}));var Je,Qe,er,rr=function(e){return e.privacyPolicyAcceptance===Ge.EXPLICIT},tr=function(e){return e.termsConditionsAcceptance===ke.EXPLICIT},nr=function(e){return e.canAcceptLicensesInOneStep&&tr(e)&&rr(e)},or=function(e){return!nr(e)&&rr(e)},ir=function(e){return nr(e)||tr(e)},ar=function(e){return["kr-en","kr-ko"].includes(e)};!function(e){e.WWW="www"}(Je||(Je={})),function(e){e.FALSE="0",e.TRUE="1"}(Qe||(Qe={})),function(e){e.OK="ok",e.RISKY="risky",e.UNREACHABLE="unreachable"}(er||(er={}));var sr,cr,ur,lr,dr,pr="https://spclient.wg.spotify.com".concat("/email-dossier/generate-dossier"),_r=function(){var e=(0,R.Z)(A().mark((function e(r){var t,n;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(pr,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r})});case 3:return t=e.sent,e.next=6,t.json();case 6:if(!(n=e.sent).unreachable){e.next=9;break}return e.abrupt("return",{result:er.UNREACHABLE,suggestions:n.unreachable.suggestions||[]});case 9:if(!n.risky){e.next=11;break}return e.abrupt("return",{result:er.RISKY,suggestions:n.risky.suggestions||[]});case 11:e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:return e.abrupt("return",{result:er.OK,suggestions:[]});case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(r){return e.apply(this,arguments)}}(),fr={},yr=function(e){var r=fr[e];if(r)return r;var t=_r(e);return fr[e]=t,t},Er=t(67324),hr=t(82483),Or=t(32125),Ir=t(59088),mr=t(83211),vr=t(61643),gr=t(76496),br=Or.ZP.span.withConfig({displayName:"InputHelpBox__Text",componentId:"dhxvou-0"})(["min-inline-size:0;overflow-wrap:break-word;"]),Sr=(0,Or.ZP)(mr.D).withConfig({displayName:"InputHelpBox__Help",componentId:"dhxvou-1"})(["display:flex;margin-block-start:",";color:",";"],(0,gr.mA)(-2,Er.dl),(0,Ir.NE)(Ir.iK.textAnnouncement)),wr=(0,Or.ZP)(vr.l).attrs({iconSize:16}).withConfig({displayName:"InputHelpBox__IconExclamationCircleStyled",componentId:"dhxvou-2"})(["block-size:1.25rem;margin-inline-end:",";flex-shrink:0;"],(0,gr.mA)(-4,Er.hM)),Nr=function(e){return(0,l.jsxs)(Sr,{variant:"viola",children:[(0,l.jsx)(wr,{}),(0,l.jsx)(br,{children:e.children})]})},Pr=Or.ZP.div.withConfig({displayName:"EmailSuggestions__Chips",componentId:"sc-1sjffwz-0"})(["margin-top:",";"],Er.dl),Rr=(0,Or.ZP)(hr.A).withConfig({displayName:"EmailSuggestions__ChipStyled",componentId:"sc-1sjffwz-1"})(["cursor:pointer;"]),Lr=function(e){var r=e.split("@"),t=(0,de.Z)(r,2),n=t[0],o=t[1];return"".concat(n,"@<strong>").concat(o,"</strong>")},Ar=function(e){var r=e.suggestions,t=e.onSelect,n=(0,w.et)().getTranslationString;return(0,l.jsxs)("div",{children:[(0,l.jsx)(Nr,{children:n("email_dossier_suggestions")}),(0,l.jsx)(Pr,{children:r.map((function(e,r){return(0,l.jsx)(Rr,{"data-testid":"email-suggestion",onClick:function(n){n.preventDefault(),t(e,r+1)},children:(0,l.jsx)("span",{dangerouslySetInnerHTML:{__html:Lr(e.substitutedAddress)}})},e.domain)}))})]})},Fr=t(44006),Dr=t(83418),jr=t(33844);!function(e){e.ALREADY_IN_USE="already_in_use",e.INVALID_EMAIL="invalid_email",e.UNREACHABLE="unreachable"}(sr||(sr={})),function(e){e.TOO_SHORT="too_short",e.REQUIREMENTS_NOT_MET="requirements_not_met",e.SERVER_VALIDATION_ERROR="server_validation_error"}(cr||(cr={})),function(e){e.DAY_INVALID="day_invalid",e.MONTH_INVALID="month_invalid",e.YEAR_INVALID="year_invalid",e.YEAR_BELOW_1900="year_below_1900",e.TOO_YOUNG="too_young",e.INVALID="invalid"}(ur||(ur={})),function(e){e.INVALID="invalid"}(lr||(lr={})),function(e){e.Male="male",e.Female="female",e.NonBinary="non_binary",e.Other="other",e.PreferNotToSay="prefer_not_to_say",e.None=""}(dr||(dr={}));var Cr=t(12300),xr=function(e,r){return{type:"SUGGESTIONS_DISPLAYED",payload:{result:e,suggestionsCount:r}}},Tr=(0,Or.ZP)(Cr.j).withConfig({displayName:"AlreadyInUseBanner__StyledBanner",componentId:"sc-1j4rkgm-0"})(["margin-block-start:",";a{&,&:hover,&:active,&:focus{color:",";}}"],Er.o7,(0,Ir.NE)(Ir.iK.textBase)),Ur=function(e){var r=e.onEvent,t=(0,Fr.T)(),n=(0,w.et)().loginUrl;return(0,l.jsx)(Tr,{contextual:!0,colorSet:"warning",onClick:function(e){"A"===e.target.tagName&&r({type:"ALREADY_IN_USE_LOGIN_CLICK"})},children:(0,l.jsx)("span",{tabIndex:-1,dangerouslySetInnerHTML:{__html:t("email_error_already_exists_text",{$LOGIN_URL:n})}})})},Mr=t(43045),kr=Or.ZP.div.withConfig({displayName:"PhoneNumberLink__Container",componentId:"sc-1sntow8-0"})(["margin-block-start:",";"],Er.dl),Gr=(0,Or.ZP)(Mr.h).withConfig({displayName:"PhoneNumberLink__StyledLink",componentId:"sc-1sntow8-1"})(["font-size:14px;"]),Wr=function(e){var r=e.onEvent,t=(0,Fr.T)(),n=(0,w.et)().phoneAccountsUrl;return(0,l.jsx)(kr,{children:(0,l.jsx)(Gr,{semanticColor:"textBrightAccent",href:n,onClick:function(){r({type:"PHONE_NUMBER_LINK_CLICK"})},children:t("phone_num_signup_link")})})},Zr=function(e){var r=e.state,t=e.onChange,n=e.onTouched,o=e.showErrors,i=e.isDisabled,a=e.isRequired,s=e.hasFocus,d=e.isPhoneNumberMarket,p=e.onEvent,_=r.value,f=r.error,y=!f,E=(0,Fr.T)(),h=(0,jr._U)(s),O=(0,u.useState)([]),I=O[0],m=O[1],v=(0,u.useState)(!1),g=v[0],b=v[1];(0,u.useEffect)((function(){var e=!!_&&!g&&(!f||f.code===sr.UNREACHABLE),r=setTimeout((0,R.Z)(A().mark((function r(){var t,n,o;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,yr(String(_));case 4:t=r.sent,n=t.result,!(o=t.suggestions).length||n!==er.RISKY&&n!==er.UNREACHABLE?m([]):(m(o),p(xr(n,o.length)));case 8:case"end":return r.stop()}}),r)}))),200);return function(){clearTimeout(r)}}),[_,f]);return(0,l.jsx)("div",{children:(0,l.jsxs)(c.cw,{label:E("new_email_label"),labelFor:"username",children:[(0,l.jsx)(Dr.y,{ref:h,required:a,error:!y&&o,"aria-invalid":!y&&o,"aria-errormessage":"username-error-message",disabled:i,id:"username",type:"email",name:"username",placeholder:E("new_email_placeholder"),autoComplete:"username",value:_,onChange:function(e){var r=e.target;b(!1),m([]),t(r.value)},onFocus:function(){return p({type:"FIELD_FOCUSSED"})},onBlur:n}),o&&f&&f.code!==sr.ALREADY_IN_USE&&(0,l.jsx)(c.jo,{id:"username-error-message",children:function(e){switch(e.code){case sr.ALREADY_IN_USE:return E("email_error_exists");case sr.UNREACHABLE:return E("email_error_unreachable");case jr.ZU.UNEXPECTED_ERROR:return E("error_unknown_try_again");case jr.ON.REQUIRED:return E("email_error_empty");default:return e.message||E("email_error_invalid")}}(f)}),o&&(null===f||void 0===f?void 0:f.code)===sr.ALREADY_IN_USE&&(0,l.jsx)(Ur,{onEvent:p}),!!I.length&&(0,l.jsx)(Ar,{suggestions:I,onSelect:function(e,r){b(!0),m([]),t(e.substitutedAddress),p(function(e,r){return{type:"SUGGESTION_SELECTED",payload:{domain:e,position:r}}}(e.domain,r))}}),d&&(0,l.jsx)(Wr,{onEvent:p})]})})},Br=(0,Or.ZP)(Dr.y).withConfig({displayName:"DayInput__StyledFormInput",componentId:"wnr6jz-0"})(["inline-size:30%;"]),Kr=t(38388),Hr=["january","february","march","april","may","june","july","august","september","october","november","december"],Vr=(0,Or.ZP)(Dr.y).withConfig({displayName:"YearInput__StyledFormInput",componentId:"sc-19ruqww-0"})(["inline-size:50%;"]),Yr=t(22875);function qr(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function $r(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?qr(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qr(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var zr,Xr=Or.ZP.div.withConfig({displayName:"BirthdateField__FieldsWrapper",componentId:"sc-13tln09-0"})(["display:flex;> * + *{margin-left:",";}"],Er.dl),Jr=Or.ZP.div.withConfig({displayName:"BirthdateField__ErrorMessages",componentId:"sc-13tln09-1"})(["> * + *{margin-top:",";}"],Er.hM),Qr={day:function(e){var r=e.value,t=e.onChange,n=e.onFocus,o=e.isDisabled,i=e.isRequired,a=e.hasFocus,s=e.error,c=e.errorMessageId,u=(0,Fr.T)(),d=(0,jr._U)(a);return(0,l.jsx)(Br,{ref:d,id:"day",name:"day",disabled:o,error:s,"aria-invalid":s,"aria-errormessage":c,inputMode:"numeric",pattern:"\\d*",maxLength:2,autoComplete:"bday-day",onChange:function(e){var r=e.target.value.replace(/\D/g,"");t(r)},onFocus:n,placeholder:u("day_placeholder").toLocaleLowerCase(),required:i,type:"numeric",value:r,"data-testid":"birthDateDay"})},month:function(e){var r=e.value,t=e.onChange,n=e.onFocus,o=e.isDisabled,i=e.isRequired,a=e.hasFocus,s=e.error,c=e.errorMessageId,u=(0,Fr.T)(),d=(0,jr._U)(a);return(0,l.jsxs)(Kr.i,{ref:d,id:"month",name:"month",disabled:o,value:r,onChange:function(e){t(e.target.value)},onFocus:n,required:i,error:s,"aria-invalid":s,"aria-errormessage":c,autoComplete:"bday-month","data-testid":"birthDateMonth",children:[(0,l.jsx)("option",{disabled:!0,value:"",children:u("month")}),Hr.map((function(e,r){return(0,l.jsx)("option",{value:r+1,children:u(e)},e)}))]})},year:function(e){var r=e.value,t=e.onChange,n=e.onFocus,o=e.isDisabled,i=e.isRequired,a=e.hasFocus,s=e.error,c=e.errorMessageId,u=(0,Fr.T)(),d=(0,jr._U)(a);return(0,l.jsx)(Vr,{ref:d,id:"year",name:"year",disabled:o,inputMode:"numeric",maxLength:4,onChange:function(e){var r=e.target.value.replace(/\D/g,"");t(r)},onFocus:n,placeholder:u("year_placeholder").toLocaleLowerCase(),required:i,type:"numeric",value:r,error:s,"aria-invalid":s,"aria-errormessage":c,autoComplete:"bday-year","data-testid":"birthDateYear"})}},et=(0,u.memo)((function(e){var r=e.state,t=e.onChange,n=e.onEvent,o=e.onTouched,i=e.showErrors,a=e.isDisabled,d=e.isRequired,p=e.endianness,_=e.hasFocus,f=(0,Fr.T)(),y=r.value,E=r.error,h=(0,u.useMemo)((function(){return function(e,r){if(!e)return null;if("string"===typeof e.code){var t=e.code.split(",");if(t.includes(ur.TOO_YOUNG))return[{id:ur.TOO_YOUNG,message:r("new_birthdate_too_young",{$READ_MORE_URL:"https://www.spotify.com/legal/end-user-agreement/"}),fields:["year"]}];var n=[];if(t.includes(ur.DAY_INVALID)&&n.push({id:ur.DAY_INVALID,message:r("new_birthdate_day_invalid"),fields:["day"]}),t.includes(ur.MONTH_INVALID)&&n.push({id:ur.MONTH_INVALID,message:r("month_error_empty"),fields:["month"]}),t.includes(ur.YEAR_INVALID)&&n.push({id:ur.YEAR_INVALID,message:r("new_birthdate_year_invalid"),fields:["year"]}),t.includes(ur.YEAR_BELOW_1900)&&n.push({id:ur.YEAR_BELOW_1900,message:r("new_birthdate_year_below_1990"),fields:["year"]}),n.length)return n}return[{id:ur.INVALID,message:e.message||r("new_birthdate_empty"),fields:["day","month","year"]}]}(E,f)}),[E,f]),O=(0,u.useMemo)((function(){return function(e){switch(e){case Yr.I.BIG:return["year","month","day"];case Yr.I.MIDDLE:return["month","day","year"];case Yr.I.LITTLE:default:return["day","month","year"]}}(p)}),[p]),I=(0,u.useMemo)((function(){if(_)return O.find((function(e){return null===h||void 0===h?void 0:h.some((function(r){return r.fields.includes(e)}))}))}),[_]),m=function(e,r){t($r($r({},y),{},(0,s.Z)({},e,r)))};return(0,l.jsxs)(c.cw,{label:f("new_birthdate_label"),labelFor:O[0],description:f("new_birthdate_description",{$LEARN_MORE_URL:"https://www.spotify.com/legal/end-user-agreement/"}),onBlur:function(e){var r=e.currentTarget,t=e.relatedTarget;r.contains(t)||o()},children:[(0,l.jsx)(Xr,{children:O.map((function(e){var r=Qr[e],t=null===h||void 0===h?void 0:h.find((function(r){return r.fields.includes(e)}));return(0,l.jsx)(r,{value:y[e],error:!!t&&i,errorMessageId:t?"birthdate-error-".concat(t.id):void 0,hasFocus:e===I,isDisabled:a,isRequired:d,onChange:function(r){return m(e,r)},onFocus:function(){n(function(e){return{type:"BIRTHDATE_FIELD_FOCUSSED",payload:{field:e}}}(e))}},e)}))}),h&&i&&(0,l.jsx)(Jr,{children:h.map((function(e){var r=e.id,t=e.message;return(0,l.jsx)(c.jo,{id:"birthdate-error-".concat(r),children:(0,l.jsx)("span",{dangerouslySetInnerHTML:{__html:t}})},r)}))})]})})),rt=(0,u.memo)((function(e){var r=e.state,t=e.onChange,n=e.onEvent,o=e.onTouched,i=e.showErrors,a=e.isDisabled,s=e.isRequired,u=e.hasFocus,d=(0,Fr.T)(),p=r.value,_=r.error,f=!_,y=(0,jr._U)(u);return(0,l.jsxs)(c.cw,{label:d("new_displayname_label"),labelFor:"displayName",description:d("new_displayname_description"),children:[(0,l.jsx)(Dr.y,{ref:y,required:s,error:!f&&i,"aria-invalid":!f&&i,"aria-errormessage":"displayname-error-message",disabled:a,id:"displayName",type:"text",name:"displayName",autoComplete:"given-name",value:p,onChange:function(e){t(e.target.value)},onFocus:function(){return n({type:"FIELD_FOCUSSED"})},onBlur:o}),i&&_&&(0,l.jsx)(c.jo,{id:"displayname-error-message",children:_.message||d("displayname_error_empty")})]})})),tt=t(75831),nt=function(e){var r=[dr.Male,dr.Female];return e.useNonBinary&&r.push(dr.NonBinary),e.useOtherGender&&r.push(dr.Other),e.usePreferNotToSayGender&&r.push(dr.PreferNotToSay),r},ot=Object.values(dr).map(String),it=function(e){return"string"===typeof e&&ot.includes(e)},at=(zr={},(0,s.Z)(zr,dr.Male,"new_gender_male"),(0,s.Z)(zr,dr.Female,"new_gender_female"),(0,s.Z)(zr,dr.NonBinary,"gender_nonbinary"),(0,s.Z)(zr,dr.Other,"new_gender_other"),(0,s.Z)(zr,dr.PreferNotToSay,"gender_prefer_not_to_say"),(0,s.Z)(zr,dr.None,""),zr),st=(0,u.memo)((function(e){var r=e.state,t=e.onChange,n=e.onEvent,o=e.onTouched,i=e.showErrors,a=e.isDisabled,s=e.isRequired,d=e.hasFocus,p=e.signupFlags,_=(0,Fr.T)(),f=(0,jr._U)(d),y=(0,u.useMemo)((function(){return nt(p)}),[p]),E=r.error,h=r.value,O=!E,I=function(e){var r=e.target.value;it(r)&&t(r)};return(0,l.jsxs)(c.cw,{label:_("new_gender_label"),description:_("new_gender_description"),role:"radiogroup",inline:!0,withFieldset:!0,onBlur:o,children:[y.map((function(e,r){return(0,l.jsx)(tt.w,{ref:0===r?f:void 0,id:"gender_option_".concat(e),disabled:a,name:"gender",value:e,checked:h===e,onChange:I,onFocus:function(){return n({type:"FIELD_FOCUSSED"})},required:s,"aria-invalid":i&&!O,"aria-errormessage":"gender-error-message",children:_(at[e])},e)})),!O&&i&&(0,l.jsx)(c.jo,{id:"gender-error-message",children:function(e){return e.code===lr.INVALID?_("gender_error"):e.message||_("gender_error")}(E)})]})})),ct=t(4730),ut=t(56424),lt=["state","onChange","onEvent","onTouched","isDisabled","isRequired","showErrors","hasFocus","isTinted"];function dt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function pt(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?dt(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dt(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var _t=Or.ZP.div.withConfig({displayName:"CheckboxField__Container",componentId:"sc-1d45zbm-0"})(["",""],(function(e){return e.isTinted?(0,Or.iv)(["padding:"," 0 "," ",";background-color:",";border-radius:5px;"],Er.o7,Er.o7,Er.o7,(0,Ir.NE)("backgroundTintedBase")):""})),ft=function(e){var r=e.state,t=e.onChange,n=e.onEvent,o=e.onTouched,i=e.isDisabled,a=e.isRequired,s=e.showErrors,c=e.hasFocus,u=e.isTinted,d=(0,ct.Z)(e,lt),p=r.value,_=r.error,f=(0,jr._U)(c);return(0,l.jsx)(_t,{isTinted:u,children:(0,l.jsx)(ut.z,pt({ref:f,onChange:function(e){t(e.target.checked)},onBlur:o,checked:p,disabled:i,required:a,"aria-invalid":s&&!!_,onFocus:function(){return n({type:"FIELD_FOCUSSED"})}},d))})},yt=["id","messagesOption","showOptInText","market"];function Et(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ht(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Et(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Et(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Ot=Or.ZP.div.withConfig({displayName:"MarketingField__Container",componentId:"sc-18w99ih-0"})(["> * + *{margin-top:",";}"],Er.dl),It=function(e,r){return ar(r)?"marketing_opt_in_agree_kr":e===Me.OPT_IN?"marketing_messages_opt_in":"marketing_messages_opt_out"},mt=(0,u.memo)((function(e){e.id;var r=e.messagesOption,t=e.showOptInText,n=e.market,o=(0,ct.Z)(e,yt),i=(0,Fr.T)();return(0,l.jsxs)(Ot,{children:[(0,l.jsx)(ft,ht(ht({isTinted:!0,id:"checkbox-marketing",name:"marketing-opt-in"},o),{},{children:i(It(r,n))})),t&&(0,l.jsx)(mr.D,{as:"p",variant:"finale",semanticColor:"textSubdued",children:i("marketing_opt_in_text_notice")})]})})),vt=t(66072),gt=t(44793),bt=t(98317),St=t(77666),wt=t(64175),Nt=t(54021),Pt=t(12917),Rt=[{id:"password_requirement_one_letter",validate:function(e){return/^(?=.*[a-zA-Z]).+$/.test(e)}},{id:"password_requirement_one_number",validate:function(e){return/^(?=.*[0-9]).+$/.test(e)}},{id:"password_requirement_one_special_character",validate:function(e){return/^(?=.*[^a-zA-Z0-9]).+$/.test(e)}},{id:"password_requirement_eight_characters",validate:function(e){return/^.{8,}$/.test(e)}}],Lt=t(89808),At=t(43840),Ft=(0,Or.ZP)(Lt.n).attrs({condensed:!0}).withConfig({displayName:"Requirement__Container",componentId:"sd3dsv-0"})(["display:flex;align-items:baseline;margin-top:",";color:",";"],Er.dl,(function(e){return!e.isValid&&e.showErrors?(0,Ir.NE)("textNegative"):"white"})),Dt=(0,Or.ZP)(At.K).attrs({iconSize:16}).withConfig({displayName:"Requirement__ValidIcon",componentId:"sd3dsv-1"})(["height:12px;width:12px;color:",";flex:0 0 auto;align-self:flex-start;&{align-self:baseline;}"],(0,Ir.NE)("textPositive")),jt=(0,Or.ZP)((function(e){var r=e.testId;return(0,l.jsx)("svg",{"aria-hidden":"true",width:"12",height:"12","data-testid":r,children:(0,l.jsx)("ellipse",{cx:"6",cy:"6",rx:"5.5",ry:"5.5",stroke:"#A7A7A7",strokeWidth:"1",fill:"none"})})})).withConfig({displayName:"Requirement__InvalidIcon",componentId:"sd3dsv-2"})(["flex:0 0 auto;align-self:flex-start;"]),Ct=(0,Or.ZP)(mr.D).withConfig({displayName:"Requirement__Label",componentId:"sd3dsv-3"})(["font-weight:450;flex:1;margin-left:",";"],Er.dl),xt=function(e){var r=e.id,t=e.isValid,n=e.showErrors,o=(0,Fr.T)();return(0,l.jsxs)(Ft,{id:r,isValid:t,showErrors:n,children:[t?(0,l.jsx)(Dt,{"aria-hidden":!0,"data-testid":"".concat(r,"-").concat(t)}):(0,l.jsx)(jt,{"aria-hidden":!0,testId:"".concat(r,"-").concat(t)}),(0,l.jsxs)(Ct,{tabIndex:0,children:[o(r),(0,l.jsx)(vt.T,{children:"".concat(o(t?"password_requirement_met":"password_requirement_not_met"),". ,")})]})]})},Tt=Or.ZP.div.withConfig({displayName:"Requirements__Container",componentId:"sc-1pvjioi-0"})(["[data-encore-id='formInputIcon'] + &{margin-top:",";}"],Er.o7),Ut=(0,Or.ZP)(Pt.d).attrs({listStyleReset:!0,condensedAll:!0}).withConfig({displayName:"Requirements__List",componentId:"sc-1pvjioi-1"})([""]),Mt=function(e){var r=e.value,t=e.showErrors,n=(0,Fr.T)();return(0,l.jsxs)(Tt,{tabIndex:0,children:[(0,l.jsx)(mr.D,{variant:"violaBold",children:n("password_requirements_label")}),(0,l.jsx)(Ut,{"data-testid":"requirements-list",children:Rt.map((function(e){var n=e.id,o=e.validate;return(0,l.jsx)(xt,{id:n,isValid:o(r),showErrors:t},n)}))})]})},kt=(0,Or.ZP)(mr.D).withConfig({displayName:"PasswordField__Description",componentId:"rhllo8-0"})(["display:block;margin-block-start:",";"],Er.dl),Gt=function(e){var r=e.state,t=e.showErrors,n=e.onChange,o=e.onEvent,i=e.onTouched,a=e.isDisabled,s=e.isRequired,d=e.hasFocus,p=e.stricterPasswords,_=r.value,f=r.error,y=!f,E=(0,u.useState)(!1),h=E[0],O=E[1],I=(0,Fr.T)(),m=(0,jr._U)(d),v=function(){var e=(0,R.Z)(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(r.target.value);case 1:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,Nt.Z)((function(){o({type:h?"PASSWORD_SHOWN":"PASSWORD_HIDDEN"})}),[h]),(0,l.jsxs)(c.cw,{label:I("new_password_label"),labelFor:"new-password",children:[(0,l.jsx)(vt.T,{"aria-live":"polite",children:I(h?"password_visible_aria_label":"password_hidden_aria_label")}),(0,l.jsx)(gt.N,{iconTrailing:(0,l.jsx)(bt.o,{type:"button",iconOnly:h?St.V:wt.K,condensedAll:!0,onClick:function(){O((function(e){return!e}))},"aria-label":I(h?"hide_password_label":"show_password_label")}),children:(0,l.jsx)(Dr.y,{ref:m,disabled:a,required:s,error:!y&&t,id:"new-password",name:"new-password",type:h?"text":"password",value:_,onChange:v,onFocus:function(){return o({type:"FIELD_FOCUSSED"})},onBlur:i,autoComplete:"new-password","aria-invalid":!y&&t,"aria-errormessage":"password-error-message","aria-label":p?I("navigate_to_password_requirements"):void 0})}),!y&&t&&f.code!==cr.REQUIREMENTS_NOT_MET&&(0,l.jsx)(c.jo,{id:"password-error-message","data-testid":"password-error-message",children:function(e){switch(e.code){case cr.TOO_SHORT:return I("new_password_error_short");case jr.ZU.UNEXPECTED_ERROR:return I("error_unknown_try_again");case jr.ON.REQUIRED:return I("password_error_empty");case cr.SERVER_VALIDATION_ERROR:return e.message;default:return e.message||e.code}}(f)}),p?(0,l.jsx)(Mt,{value:_,showErrors:t}):(0,l.jsx)(kt,{semanticColor:"textSubdued",children:I("new_password_description")})]})},Wt=["id","state","showErrors","market"];function Zt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Bt(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Zt(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Zt(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Kt=(0,u.memo)((function(e){e.id;var r=e.state,t=e.showErrors,n=e.market,o=(0,ct.Z)(e,Wt),i=r.error,a=(0,Fr.T)(),s=a("personal_info_agree_kr",{$PERSONAL_INFO_URL:"/".concat(n,"/legal/collectionanduseofpersonalinformation/")});return(0,l.jsxs)("div",{children:[(0,l.jsx)(ft,Bt(Bt({id:"personal-info-checkbox",name:"personalInfo",state:r,showErrors:t,isTinted:!0,"aria-errormessage":"personal-info-error-message"},o),{},{children:(0,l.jsx)(c.Ji,{dangerouslySetInnerHTML:{__html:s}})})),t&&i&&(0,l.jsx)(c.jo,{id:"personal-info-error-message",children:i.message||a("personal_info_agree_error")})]})})),Ht=["id","state","showErrors","market"];function Vt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Yt(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Vt(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Vt(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var qt=(0,u.memo)((function(e){e.id;var r=e.state,t=e.showErrors,n=e.market,o=(0,ct.Z)(e,Ht),i=(0,Fr.T)(),a=r.error;return(0,l.jsxs)("div",{children:[(0,l.jsx)(ft,Yt(Yt({id:"privacy-policy-checkbox",name:"privacy-policy-checkbox",state:r,showErrors:t,isTinted:!0,"aria-errormessage":"privacy-error-message"},o),{},{children:(0,l.jsx)(c.Ji,{dangerouslySetInnerHTML:{__html:i("privacy_policy_explicit",{$PRIVACY_URL:"/".concat(n,"/legal/privacy-policy/")})}})})),t&&a&&(0,l.jsx)(c.jo,{id:"privacy-error-message",children:a.message||i("terms_conditions_error")})]})})),$t=["id","state","showErrors","isOneStepLicenses","specificLicenses","market"];function zt(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Xt(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?zt(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):zt(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Jt=(0,u.memo)((function(e){e.id;var r=e.state,t=e.showErrors,n=e.isOneStepLicenses,o=e.specificLicenses,i=e.market,a=(0,ct.Z)(e,$t),s=(0,Fr.T)(),u=r.error,d={$TERMS_URL:"/".concat(i,"/legal/end-user-agreement/"),$PRIVACY_URL:"/".concat(i,"/legal/privacy-policy/")},p=n?"terms_conditions_pp_explicit":function(e,r){return ar(e)?"terms_conditions_agree_kr":r?"terms_conditions_pp_agree_de":"terms_conditions_explicit"}(i,o);return(0,l.jsxs)("div",{children:[(0,l.jsx)(ft,Xt(Xt({id:"terms-conditions-checkbox",name:"terms-conditions-checkbox",state:r,showErrors:t,isTinted:!0,"aria-errormessage":"tc-error-message"},a),{},{children:(0,l.jsx)(c.Ji,{dangerouslySetInnerHTML:{__html:s(p,d)}})})),t&&u&&(0,l.jsx)(c.jo,{id:"tc-error-message",children:u.message||s("terms_conditions_error")})]})})),Qt=["id","state","showErrors","market","countryGroup"];function en(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function rn(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?en(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):en(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var tn,nn=(0,u.memo)((function(e){e.id;var r=e.state,t=e.showErrors,n=e.market,o=e.countryGroup,i=(0,ct.Z)(e,Qt),a=(0,Fr.T)()(function(e,r){return"de"===e?"third_party_agree_de":ar(e)?"third_party_agree_kr":"EU"===r?"third_party_agree_eu":"third_party_agree"}(n,o),{$THIRD_PARTY_URL:"/".concat(n,"/legal/thirdpartydataprovision/")});return(0,l.jsx)(ft,rn(rn({id:"checkbox-privacy",name:"privacy",state:r,showErrors:t,isTinted:!0},i),{},{children:(0,l.jsx)(c.Ji,{dangerouslySetInnerHTML:{__html:a}})}))})),on=Or.ZP.div.withConfig({displayName:"LegalNotes__Container",componentId:"sc-1re1tot-0"})(["margin-block-start:",";> * + *{margin-block-start:",";}"],Er.g4,Er.dl),an=function(e){var r=e.notes;return(0,l.jsx)(on,{children:r.map((function(e,r){return(0,l.jsx)(u.Fragment,{children:e},r)}))})},sn=function(e){var r=e.market,t=(0,Fr.T)(),n={$TERMS_URL:"/".concat(r,"/legal/end-user-agreement/"),$PRIVACY_URL:"/".concat(r,"/legal/privacy-policy/")},o=t(ar(r)?"privacy_policy_notice_kr":"privacy_policy_non",n);return(0,l.jsx)(mr.D,{as:"p",variant:"mesto",children:(0,l.jsx)(c.Ji,{dangerouslySetInnerHTML:{__html:o}})})},cn=Or.ZP.div.withConfig({displayName:"TermsAndConditionsImplicit__Container",componentId:"qmcnxq-0"})(["> * + *{margin-top:",";}"],Er.nu),un=function(e){var r=e.text;return(0,l.jsx)(mr.D,{as:"p",variant:"mesto",children:(0,l.jsx)(c.Ji,{dangerouslySetInnerHTML:{__html:r}})})},ln=function(e){var r=e.market,t=e.isOneStepLicenses,n=e.termsAndConditions,o=e.privacyPolicy,i=(0,Fr.T)(),a={$TERMS_URL:"/".concat(r,"/legal/end-user-agreement/"),$PRIVACY_URL:"/".concat(r,"/legal/privacy-policy/")};if(t&&n&&o){var s=i("terms_conditions_pp_implicit",a);return(0,l.jsx)(un,{text:s})}var c="uk"===r?"terms_conditions_implicit_uk":"terms_conditions_implicit";return(0,l.jsxs)(cn,{children:[n&&(0,l.jsx)(un,{text:i(c,a)}),o&&(0,l.jsx)(un,{text:i("privacy_policy_implicit",a)})]})},dn=function(){var e=(0,Fr.T)();return(0,l.jsx)(mr.D,{as:"p",variant:"mesto",children:e("service_messages_notice")})},pn=t(51848),_n=t(9198),fn=t(42699),yn=t(313),En=function(e){return function(r,t){if((0,pn.xb)(r)&&!t)return null;if((0,pn.xb)(r)&&t)return ur.INVALID;var n=[],o=r.day,i=r.month,a=r.year,s=parseInt(o,10),c=parseInt(i,10),u=parseInt(a,10);return(isNaN(s)||s<1||s>31)&&n.push(ur.DAY_INVALID),(isNaN(c)||c<1||c>12)&&n.push(ur.MONTH_INVALID),isNaN(u)||!u?n.push(ur.YEAR_INVALID):u<1900&&n.push(ur.YEAR_BELOW_1900),n.length?n.join(","):(0,fn.Z)((0,_n.Z)((0,pn.ZU)(r),e),new Date)?ur.TOO_YOUNG:(0,pn.JY)(r)?(0,yn.Z)((0,pn.ZU)(r),new Date)?null:ur.TOO_YOUNG:ur.INVALID}},hn=function(e,r){return r&&!e?jr.ON.REQUIRED:null},On=function(e,r){return r||e?e?null:jr.ON.REQUIRED:null},In=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,mn=function(e){switch(e){case ue.OK:return;case ue.EMAIL_IS_ALREADY_IN_USE:return sr.ALREADY_IN_USE;default:return sr.INVALID_EMAIL}},vn=function(e,r){return e||r?In.test(e)?(0,R.Z)(A().mark((function r(){var t,n,o,i;return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Promise.all([Tn(e).then(mn),yr(e)]);case 2:if(t=r.sent,n=(0,de.Z)(t,2),o=n[0],i=n[1],!o){r.next=8;break}return r.abrupt("return",o);case 8:if(i.result!==er.UNREACHABLE){r.next=10;break}return r.abrupt("return",sr.UNREACHABLE);case 10:return r.abrupt("return",null);case 11:case"end":return r.stop()}}),r)}))):sr.INVALID_EMAIL:null},gn=function(e){var r=nt(e);return function(e,t){return e||t?e!==dr.None&&Object.values(r).includes(e)?null:lr.INVALID:null}},bn=function(e,r){return r||e?e.length<8?cr.TOO_SHORT:function(){return Un(e).then((function(e){return e?{code:cr.SERVER_VALIDATION_ERROR,message:e}:null}))}:null},Sn=function(e,r){return r||e?function(e){return Rt.every((function(r){return(0,r.validate)(e)}))}(e)?function(){return Un(e).then((function(e){return e?{code:cr.SERVER_VALIDATION_ERROR,message:e}:null}))}:cr.REQUIREMENTS_NOT_MET:null};!function(e){e.FEMALE="female",e.MALE="male",e.NEUTRAL="neutral",e.OTHER="other",e.PREFER_NOT_TO_SAY="prefer_not_to_say",e.UNSELECTED=""}(tn||(tn={}));var wn,Nn=function(e){switch(e){case dr.Female:return tn.FEMALE;case dr.Male:return tn.MALE;case dr.NonBinary:return tn.NEUTRAL;case dr.Other:return tn.OTHER;case dr.PreferNotToSay:return tn.PREFER_NOT_TO_SAY;default:return tn.UNSELECTED}},Pn=function(e,r){var t=r.appData,n=r.signupFlags,o=t.creationFlow,i=t.creationPoint,a=t.market,s=t.referrer,c=t.signupServiceAppKey,u=t.flowId,l=(e.termsConditionsAcceptance||!ir(n))&&(e.privacyPolicyAcceptance||!or(n)),d=e.personalInfoAgree?Qe.TRUE:Qe.FALSE,p=n.spotifyMarketingMessagesOption===Me.OPT_IN,_=e.sendEmail?Qe.TRUE:Qe.FALSE,f=e.sendEmail?Qe.FALSE:Qe.TRUE,y={identifier_token:e.idToken||"",birth_day:e.birthdate.day,birth_month:e.birthdate.month,birth_year:e.birthdate.year,displayname:e.displayName,gender:Nn(e.gender),collect_personal_info:ar(a)?d:void 0,iagree:l?Qe.TRUE:Qe.FALSE,"send-email":p?_:f,thirdpartyemail:e.thirdPartyEmailAgree?Qe.TRUE:Qe.FALSE,creation_flow:o||"",creation_point:i,key:c,platform:Je.WWW,referrer:s,flow_id:u};return e.provider===je.FACEBOOK&&(y.email=e.email),y};function Rn(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,he.Z)(e);if(r){var o=(0,he.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,Ee.Z)(this,t)}}!function(e){e.INVALID_FORM_DATA="invalid_form_data",e.EMAIL_IS_ALREADY_IN_USE="email_is_already_in_use",e.GENERIC_ERROR="generic_error",e.UNKNOWN="unknown"}(wn||(wn={}));var Ln=function(e){(0,ye.Z)(t,e);var r=Rn(t);function t(e,n,o){var i;return(0,_e.Z)(this,t),i=r.call(this,"Could not create account"),(0,s.Z)((0,fe.Z)(i),"code",void 0),(0,s.Z)((0,fe.Z)(i),"errorMessage",void 0),(0,s.Z)((0,fe.Z)(i),"fieldErrors",void 0),i.code=e,i.errorMessage=n,i.fieldErrors=o,i}return(0,pe.Z)(t)}((0,Oe.Z)(Error)),An={birthdate:"birthdate",birth_day:"birthdate",birth_month:"birthdate",birth_year:"birthdate",displayname:"displayName",email:"email",gender:"gender",personalInfoAgree:"personalInfoAgree",privacyPolicyAcceptance:"privacyPolicyAcceptance",sendEmail:"sendEmail",termsConditionsAcceptance:"termsConditionsAcceptance",thirdPartyEmailAgree:"thirdPartyEmailAgree"},Fn=function(){var e=(0,R.Z)(A().mark((function e(r,t){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=r,e.next=e.t0===Y.Rb.FACEBOOK_IDP?3:e.t0===Y.Rb.GOOGLE?6:9;break;case 3:return e.next=5,(0,ve.ol)(t,ge.q.SUBMIT_FACEBOOK);case 5:case 8:case 9:return e.abrupt("return");case 6:return e.next=8,(0,ve.ol)(t,ge.q.SUBMIT_GOOGLE);case 10:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),Dn=function(){var e=(0,R.Z)(A().mark((function e(r,t){var n,o,i,a,s,c,u,l,d,p,_,f,y,E,h,O,I,m,v,g,b,S,w,N;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.appData,o=t.destinationUrl,i=t.logSuccessImpression,a=n.recaptchaScoringKey,s=n.referrer,c=void 0===s?"":s,u=n.flowId,l=n.signupServiceUrl,d=n.campaignReferrer,p=n.csrfToken,_=Ve(r.provider),f=Pn(r,t),e.next=6,Fn(_,a);case 6:return e.next=8,Promise.all([Te(l,f,o,u),(0,me.zB)(c,_,o,u)]);case 8:if(y=e.sent,E=(0,de.Z)(y,1),!(h=E[0])){e.next=54;break}if(O=h.status,I=h.errors,m=h.login_token,v=h.message,O!==ue.OK){e.next=33;break}return e.next=16,Promise.all([(0,me.XC)(d,o,u),(0,ve.y1)(a),(0,me.Mq)(c,_,o,u)]);case 16:if(i(),_!==Y.Rb.PHONE_NUMBER){e.next=20;break}return e.next=20,(0,me.aY)(o,u);case 20:if(!m){e.next=31;break}return e.next=23,(0,be.Z)(m,p,u,o);case 23:if(!e.sent){e.next=29;break}return e.next=27,Promise.all([(0,me.dN)({destinationUrl:o,referrer:c,type:_}),(0,me.em)(d,o,u)]);case 27:e.next=31;break;case 29:return e.next=31,(0,me.sO)({destinationUrl:o,referrer:c,type:_});case 31:return window.location.href=o,e.abrupt("return");case 33:if(!I){e.next=45;break}return e.next=36,(0,me.mv)(c,_,o,u,{errors:I});case 36:if(g=Object.keys(I),b=g.filter(Ie.E),!b.some((function(e){return!!An[e]}))){e.next=42;break}throw S=b.reduce((function(e,r){var t=An[r],n=I[r];return t&&n&&(e[t]=n),e}),{}),new Ln(wn.INVALID_FORM_DATA,void 0,S);case 42:if(!(w=I.generic_error)){e.next=45;break}throw new Ln(wn.GENERIC_ERROR,w);case 45:if(O!==ue.UNKNOWN_ERROR||!v){e.next=49;break}return e.next=48,(0,me.mv)(c,_,o,u,{message:v});case 48:throw new Ln(wn.UNKNOWN,v);case 49:if(O!==ue.EMAIL_IS_ALREADY_IN_USE){e.next=54;break}return N={email_already_registered:"email_already_registered"},e.next=53,(0,me.mv)(c,_,o,u,N);case 53:throw new Ln(wn.EMAIL_IS_ALREADY_IN_USE);case 54:return e.next=56,(0,me.mv)(c,_,o,u);case 56:throw new Ln(wn.UNKNOWN);case 57:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),jn=t(11752),Cn=t.n(jn),xn="".concat(Cn()().publicRuntimeConfig.apiBase).concat("/signup/public/v1/account"),Tn=function(){var e=(0,R.Z)(A().mark((function e(r){var t,n,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(xn,"?validate=1&email=").concat(encodeURIComponent(r)));case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,o=n.status,e.abrupt("return",o);case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Un=function(){var e=(0,R.Z)(A().mark((function e(r){var t,n,o,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(xn,"?validate=1&password=").concat(encodeURIComponent(r)));case 2:return n=e.sent,e.next=5,n.json();case 5:return o=e.sent,i=null===o||void 0===o||null===(t=o.errors)||void 0===t?void 0:t.password,e.abrupt("return","string"===typeof i?i:null);case 8:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),Mn=function(e,r){var t=r.destinationUrl,n=r.flowId;switch(e.type){case"SIGNUP_FLOW_IDP_IMPRESSION":return void(0,V.$$)(t,n);case"SIGNUP_FLOW_IDP_FIELD_FOCUSSED":return void(0,V.jJ)(e.id,t,n);case"SIGNUP_FLOW_IDP_BIRTHDATE_FIELD_FOCUSSED":var o={day:"birth_day",month:"birth_month",year:"birth_year"}[e.payload.field];return void(0,V.jJ)(o,t,n);case"SIGNUP_FLOW_IDP_FORM_STEP_ERROR":return void function(e){ce.apply(this,arguments)}(e.payload.invalidFields.join(","));case"SIGNUP_FLOW_IDP_FORM_STEP_SUBMIT":var i=e.payload,a=i.stepIndex,s=i.stepsLength,c=i.data.provider;return void(a===s-1&&function(e){ae.apply(this,arguments)}(Ve(c)));case"SIGNUP_FLOW_IDP_ALREADY_IN_USE_LOGIN_CLICK":return void(0,V.kN)(Y.Nr.EMAIL_ERROR_MESSAGE,t,n);default:return}},kn=function(e){var r=e.children,t=(0,w.et)(),n=t.forwardUrl,i=t.flowId,a=t.referrer,s={flowId:i,destinationUrl:(0,N.Z)(n),referrer:a};return S((function(e){return function(e,r){return Object.values(o).forEach((function(t){return t(e,r)}))}(e,s)})),(0,l.jsx)(u.Fragment,{children:r})},Gn="reCAPTCHALoadCallback",Wn=(0,u.createContext)(null),Zn=function(e){var r=e.children,t=(0,w.et)(),n=t.cspNonce,o=t.recaptchaScoringKey,i=(0,u.useRef)(!1),a=(0,u.useRef)([]),s=(0,u.useCallback)((function(e){i.current?e(window.grecaptcha.enterprise):a.current.push(e)}),[]),c=(0,u.useMemo)((function(){return{render:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return new Promise((function(e){return s((function(t){var n=t.render;return e(n.apply(void 0,r))}))}))},reset:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];s((function(e){e.reset.apply(void 0,r)}))},getResponse:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return new Promise((function(e){return s((function(t){var n=t.getResponse;return e(n.apply(void 0,r))}))}))},execute:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];return new Promise((function(e){s((function(t){return t.execute.apply(void 0,r).then(e)}))}))}}}),[s]);return(0,u.useEffect)((function(){if(window.reCAPTCHALoadCallback)throw new Error("Recaptcha load callback has already been set.");window.reCAPTCHALoadCallback=function(){window.grecaptcha.enterprise.ready((function(){i.current=!0,a.current.forEach((function(e){e(window.grecaptcha.enterprise)})),a.current.length=0,(0,ve.qj)(o),function(){J.apply(this,arguments)}()}))};return function(e){var r=e.callbackName,t=e.cspNonce,n=e.onError,o=e.recaptchaKey,i=document.createElement("script");i.defer=!0,i.nonce=t,i.onerror=n,i.src="https://www.google.com/recaptcha/enterprise.js?render=".concat(o,"&onload=").concat(r),document.head.appendChild(i)}({callbackName:Gn,cspNonce:n,onError:function(e){return function(e){return Q.apply(this,arguments)}(e)},recaptchaKey:o}),function(){oe.apply(this,arguments)}(),function(){window.reCAPTCHALoadCallback=void 0}}),[]),(0,l.jsx)(Wn.Provider,{value:c,children:r})},Bn=function(e,r){var t=r.locale,n=r.market,o=r.geoCountry,i=r.countryCode;switch(e.type){case"SIGNUP_FLOW_EMAIL_IMPRESSION":return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.NEW_SIGNUP_EMAIL_IMPRESSION,value:1,tags:{locale:t,market:n,geoCountry:o,countryCode:i}});case"SIGNUP_FLOW_EMAIL_FORM_COMPLETED":return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.NEW_SIGNUP_EMAIL_ATTEMPT,value:1,tags:{locale:t,market:n}});case"SIGNUP_FLOW_EMAIL_SUCCESS_IMPRESSION":return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.NEW_SIGNUP_EMAIL_SUCCESS,value:1,tags:{locale:t,market:n}});case"SIGNUP_FLOW_EMAIL_FORM_ERROR":var a=e.payload,s=a.error,c=a.fieldErrors;return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.NEW_SIGNUP_EMAIL_ERROR,value:1,tags:{locale:t,market:n,message:String(s.code),body:String(s.message),title:String(s.title),fields:Object.entries(c).map((function(e){var r=(0,de.Z)(e,2),t=r[0],n=r[1];return[t,null===n||void 0===n?void 0:n.code].filter(Boolean).join(":")})).join(",")}});default:return}},Kn=function(e,r){var t=r.locale,n=r.market;switch(e.type){case"SIGNUP_FLOW_IDP_IMPRESSION":return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.NEW_SIGNUP_IDP_IMPRESSION,value:1,tags:{locale:t,market:n}});case"SIGNUP_FLOW_IDP_FORM_COMPLETED":return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.NEW_SIGNUP_IDP_ATTEMPT,value:1,tags:{locale:t,market:n}});case"SIGNUP_FLOW_IDP_SUCCESS_IMPRESSION":return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.NEW_SIGNUP_IDP_SUCCESS,value:1,tags:{locale:t,market:n}});case"SIGNUP_FLOW_IDP_FORM_ERROR":var o=e.payload,i=o.error,a=o.fieldErrors;return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.NEW_SIGNUP_IDP_ERROR,value:1,tags:{locale:t,market:n,message:String(i.code),body:String(i.message),title:String(i.title),fields:Object.entries(a).map((function(e){var r=(0,de.Z)(e,2),t=r[0],n=r[1];return[t,null===n||void 0===n?void 0:n.code].filter(Boolean).join(":")})).join(",")}});default:return}},Hn=function(e){switch(e.type){case"SIGNUP_FLOW_MARKET_MISMATCH":var r=e.payload,t=r.countryCode,n=r.geoCountry;return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.MARKET_MISMATCH,value:1,tags:{geoCountry:n,countryCode:t}});case"SIGNUP_FLOW_MARKET_MISMATCH_FOLLOW":var o=e.payload,i=o.countryCode,a=o.geoCountry;return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.MARKET_MISMATCH_FOLLOW,value:1,tags:{geoCountry:a,countryCode:i}});case"SIGNUP_FLOW_MARKET_MISMATCH_DISMISS":var s=e.payload,c=s.countryCode,u=s.geoCountry;return void(0,X.s)({metric_type:$.MetricTypes.COUNTER,what:Y.aU.MARKET_MISMATCH_DISMISS,value:1,tags:{geoCountry:u,countryCode:c}});default:return}},Vn=function(e){var r=e.children,t=(0,w.et)(),n=t.locale,o={locale:void 0===n?"":n,market:t.market,geoCountry:t.geoCountry,countryCode:t.countryCode};return S((function(e){return function(e,r){return Object.values(i).forEach((function(t){return t(e,r)}))}(e,o)})),(0,l.jsx)(u.Fragment,{children:r})},Yn=["step"];function qn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var $n=function(e,r){var t=e.stepIndex,n=f(),o=n.query,i=n.push,a=n.replace,c=o.step,l=void 0===c?"0":c,d=(0,ct.Z)(o,Yn),p=parseInt(l,10)||0;(0,u.useEffect)((function(){"0"!==l&&a(d)}),[]),(0,Nt.Z)((function(){t!==p&&i(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?qn(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qn(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({step:String(t)},d))}),[t]),(0,Nt.Z)((function(){r((0,jr.Ol)(p))}),[p])},zn=t(27812);function Xn(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Jn(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Xn(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xn(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Qn,eo,ro=function(e,r,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=[],i=e.spotifyMarketingMessagesOption,a=e.requiresMarketingOptInText,s=e.showCollectPersonalInfo,c=e.specificLicenses,u=e.privacyPolicyAcceptance,d=e.termsConditionsAcceptance,p=i!==Me.NONE;p&&o.push({type:jr.fS.FIELD,id:"sendEmail",isRequired:!1,validate:hn,render:function(e){return(0,l.jsx)(mt,Jn({messagesOption:i,market:r,showOptInText:a},e))}}),o.push({type:jr.fS.FIELD,id:"thirdPartyEmailAgree",isRequired:!1,validate:hn,render:function(e){return(0,l.jsx)(nn,Jn({market:r,countryGroup:t},e))}}),s&&o.push({type:jr.fS.FIELD,id:"personalInfoAgree",isRequired:!0,validate:hn,render:function(e){return(0,l.jsx)(Kt,Jn({market:r},e))}}),ir(e)&&o.push({type:jr.fS.FIELD,id:"termsConditionsAcceptance",isRequired:!0,validate:hn,render:function(t){return(0,l.jsx)(Jt,Jn({market:r,isOneStepLicenses:nr(e),specificLicenses:c},t))}}),or(e)&&o.push({type:jr.fS.FIELD,id:"privacyPolicyAcceptance",isRequired:!0,validate:hn,render:function(e){return(0,l.jsx)(qt,Jn({market:r},e))}});var _=[],f=d===ke.IMPLICIT,y=u===Ge.IMPLICIT;(f||y)&&_.push((0,l.jsx)(ln,{market:r,isOneStepLicenses:nr(e),termsAndConditions:f,privacyPolicy:y}));var E=u===Ge.NON;return E&&!c&&_.push((0,l.jsx)(sn,{market:r})),n&&_.push.apply(_,(0,zn.Z)(n)),_.length&&o.push({id:"notes",type:jr.fS.COMPONENT,render:function(){return(0,l.jsx)(an,{notes:_})}}),o},to=t(48716),no=t(18919),oo=function(e){return new Promise((function(r){return setTimeout(r,e)}))},io=t(72047),ao=t.n(io),so=t(25934),co="".concat((0,Ne.b)().apiBase).concat("/signup/public/v2/account/create"),uo=function(){var e=(0,R.Z)(A().mark((function e(r){var t,n,o,i;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.dispatch,n=r.request,e.prev=1,e.next=4,fetch(co,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});case 4:return o=e.sent,e.next=7,o.json();case 7:return i=e.sent,e.abrupt("return",i);case 11:return e.prev=11,e.t0=e.catch(1),t({type:Ie.U.SET_FORM_SUBMITTING,value:!1}),t({type:Ie.U.SET_ERROR_BANNER,show:!0}),te(e.t0),e.abrupt("return",null);case 17:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(r){return e.apply(this,arguments)}}();t(54661);!function(e){e[e.GENDER_UNKNOWN=0]="GENDER_UNKNOWN",e[e.GENDER_MALE=1]="GENDER_MALE",e[e.GENDER_FEMALE=2]="GENDER_FEMALE",e[e.GENDER_NON_BINARY=3]="GENDER_NON_BINARY",e[e.GENDER_OTHER=4]="GENDER_OTHER",e[e.GENDER_PREFER_NOT_TO_SAY=5]="GENDER_PREFER_NOT_TO_SAY"}(Qn||(Qn={})),function(e){e[e.CAPABILITY_UNKNOWN=0]="CAPABILITY_UNKNOWN",e[e.CAPABILITY_WEB_INTERACTION_V1=1]="CAPABILITY_WEB_INTERACTION_V1"}(eo||(eo={}));var lo,po,_o=t(78718),fo=t.n(_o),yo=t(93220),Eo=t.n(yo),ho=function(e,r){var t="",n=fo()(r,["creation_flow","forward_url","locale","flow","method","utm_campaign","utm_content","utm_medium","utm_source","utm_term"]);return Object.keys(n).length>0&&(t="?".concat(new URLSearchParams(Eo()(n).filter((function(e){return Array.isArray(e)&&!!e[1]})).map((function(e){return[e[0],Array.isArray(e[1])?String(e[1][0]):String(e[1])]}))).toString())),"".concat(e,"/signup/challenge").concat(t)},Oo=t(23025);function Io(e){var r=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,he.Z)(e);if(r){var o=(0,he.Z)(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return(0,Ee.Z)(this,t)}}!function(e){e.FIELD_BIRTHDATE="birthdate",e.FIELD_DISPLAY_NAME="displayname",e.FIELD_EMAIL="email",e.FIELD_EULA_AGREEMENT="termsConditionsAgree",e.FIELD_GENDER="gender",e.FIELD_PASSWORD="password",e.FIELD_PERSONAL_INFO_COLLECTION="personalInfoAgree",e.FIELD_UNKNOWN=""}(lo||(lo={})),function(e){e[e.NonRetryableError=7]="NonRetryableError",e[e.RetryableError=6]="RetryableError"}(po||(po={}));var mo=function(e){(0,ye.Z)(t,e);var r=Io(t);function t(e){var n;return(0,_e.Z)(this,t),(n=r.call(this,"Account could not be created: ".concat(e.title))).details=e,n}return(0,pe.Z)(t)}((0,Oe.Z)(Error));function vo(e){return go.apply(this,arguments)}function go(){return go=(0,R.Z)(A().mark((function e(r){var t,n,o,i,a,s,c,u,l,d,p,_,f,y,E,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.data,n=r.dispatch,o=r.response,i=r.logSuccessImpression,a=r.logChallengeImpression,s=r.bail,c=null===o||void 0===o?void 0:o.success,u=null===o||void 0===o?void 0:o.error,l=null===o||void 0===o?void 0:o.challenge,d=t.referrer,p=t.recaptchaScoringKey,_=t.forwardUrl,f=t.flowId,y=(0,N.Z)(_),!c){e.next=10;break}return i(),So(t,c,Y.Rb.ADAPTIVE_EMAIL),e.abrupt("return");case 10:if(!l){e.next=15;break}return a(),(0,Oo.d)({challengeResponse:l,dispatch:n,recaptchaScoringKey:p,referrer:d,registrationType:Y.Rb.ADAPTIVE_EMAIL,destinationUrl:y,flowId:f}),e.next=15,(0,V.nB)(d,Y.aU.CHALLENGE,Y.Rb.ADAPTIVE_EMAIL,y,f);case 15:if(!u){e.next=25;break}return e.next=18,Promise.all([(0,V.mv)(d,Y.Rb.ADAPTIVE_EMAIL,y,f,{errors:u}),ee()]);case 18:if(E=new mo(u.error_details),h=u.error_details.code,h===po.RetryableError){e.next=24;break}return s(E),e.abrupt("return");case 24:throw E;case 25:case"end":return e.stop()}}),e)}))),go.apply(this,arguments)}var bo=t(52582);function So(e,r,t){return wo.apply(this,arguments)}function wo(){return(wo=(0,R.Z)(A().mark((function e(r,t,n){var o,i,a,s,c,u,l,d,p;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=r.campaignReferrer,i=r.csrfToken,a=r.forwardUrl,s=r.recaptchaScoringKey,c=r.referrer,u=void 0===c?"":c,l=r.flowId,d=t.login_token,p=(0,N.Z)(a),e.next=5,Promise.all([(0,ve.y1)(s),(0,V.Mq)(u,n,p,l)]);case 5:(0,bo.g)({campaignReferrer:o,csrfToken:i,forwardUrl:a,loginToken:d,referrer:u,registrationType:n,flowId:l});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var No=t(10617),Po=function(e){switch(e){case dr.Female:return Qn.GENDER_FEMALE;case dr.Male:return Qn.GENDER_MALE;case dr.NonBinary:return Qn.GENDER_NON_BINARY;case dr.Other:return Qn.GENDER_OTHER;case dr.PreferNotToSay:return Qn.GENDER_PREFER_NOT_TO_SAY;default:return Qn.GENDER_UNKNOWN}},Ro=function(e,r){var t=r.appData,n=r.signupFlags,o=r.recaptchaToken,i=r.submissionId,a=r.callbackUri,s=t.spT,c=t.signupServiceAppKey,u=t.creationFlow,l=t.creationPoint,d=t.market,p=t.referrer,_=t.flowId,f=(0,pn.BB)(e.birthdate),y=(e.termsConditionsAcceptance||!ir(n))&&(e.privacyPolicyAcceptance||!or(n)),E=n.spotifyMarketingMessagesOption===Me.OPT_IN,h=!e.sendEmail;return{account_details:{birthdate:f,consent_flags:{collect_personal_info:ar(d)?e.personalInfoAgree:void 0,eula_agreed:y,send_email:E?e.sendEmail:h,third_party_email:e.thirdPartyEmailAgree},display_name:e.displayName,email_and_password_identifier:{email:e.email,password:e.password},gender:Po(e.gender)},callback_uri:a,client_info:{api_key:c,app_version:"v2",capabilities:[eo.CAPABILITY_WEB_INTERACTION_V1],installation_id:s||"",platform:Je.WWW},tracking:{creation_flow:u,creation_point:l||"",referrer:p},recaptcha_token:o,submission_id:i,flow_id:_}};function Lo(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Ao(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Lo(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Lo(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Fo=function(e){if(e.type===Ie.U.SET_ERROR_BANNER)throw new Error("Unexpected Error")},Do=function(){var e=(0,R.Z)(A().mark((function e(r,t){var n,o,i,a,s,c,u,l,d,p,_,f;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.query,o=t.destinationUrl,i=t.appData,a=t.logSuccessImpression,s=t.logChallengeImpression,c=i.recaptchaScoringKey,u=i.referrer,l=i.flowId,!n.new_signup){e.next=7;break}return e.next=5,oo(2e3);case 5:return window.location.assign(o),e.abrupt("return");case 7:if(!(0,No.Z)()){e.next=10;break}return e.next=10,(0,ve.rs)(c);case 10:return d=Cn()().publicRuntimeConfig.host,p=ho(d,n),_=(0,so.Z)(),f=function(){var e=(0,R.Z)(A().mark((function e(n){var d,f,y,E,h;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,ve.V3)({action:ge.q.SUBMIT_EMAIL,siteKey:c});case 2:return d=e.sent,f=Ro(r,Ao(Ao({},t),{},{recaptchaToken:d,callbackUri:p,submissionId:_})),e.next=6,Promise.all([uo({request:f,dispatch:Fo}),(0,me.zB)(u,Y.Rb.ADAPTIVE_EMAIL,o,l)]);case 6:if(y=e.sent,E=(0,de.Z)(y,1),h=E[0]){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,vo({data:i,dispatch:Fo,response:h,logSuccessImpression:a,logChallengeImpression:s,bail:n,isNewSignup:!0});case 13:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),e.next=16,ao()(f,{retries:3,factor:10,minTimeout:10,randomize:!1});case 16:case"end":return e.stop()}}),e)})));return function(r,t){return e.apply(this,arguments)}}(),jo={email:"",password:"",displayName:"",birthdate:pn.Nc,gender:dr.None,personalInfoAgree:!1,privacyPolicyAcceptance:!1,sendEmail:!1,termsConditionsAcceptance:!1,thirdPartyEmailAgree:!1};function Co(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function xo(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Co(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Co(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var To,Uo=function(){var e=(0,Fr.T)(),r=qe(),t=$e(),n=Ye(),o=ze(),i=Xe(),a=function(){var e=(0,d.useRouter)().query,r=(0,to.W6)(no.Dw);return!!e.stricter_passwords||r}();return(0,u.useMemo)((function(){return function(e,r,t,n,o,i,a){var s=e.canUsePhoneNumber;return[{fields:[{type:jr.fS.FIELD,id:"email",isRequired:!0,validate:vn,render:function(e){return(0,l.jsx)(Zr,xo({isPhoneNumberMarket:s},e))}}]},{label:n("steps_form_password_title"),fields:[{type:jr.fS.FIELD,id:"password",isRequired:!0,validate:a?Sn:bn,render:function(e){return(0,l.jsx)(Gt,xo(xo({},e),{},{stricterPasswords:a}))}}]},{label:n("steps_form_personal_title"),fields:[{type:jr.fS.FIELD,id:"displayName",isRequired:!0,validate:On,render:function(e){return(0,l.jsx)(rt,xo({},e))}},{type:jr.fS.FIELD,id:"birthdate",isRequired:!0,validate:En(i),render:function(e){return(0,l.jsx)(et,xo(xo({},e),{},{endianness:o,minimumAge:i}))}},{type:jr.fS.FIELD,id:"gender",isRequired:!0,validate:gn(e),render:function(r){return(0,l.jsx)(st,xo(xo({},r),{},{signupFlags:e}))}}]},{label:n("steps_form_terms_and_conditions_title"),buttonLabel:n("sign_up"),fields:ro(e,r,t)}]}(r,t,n,e,o,i,a)}),[n,t,r,e,o,i,a])},Mo={FIELD_BIRTHDATE:"birthdate",FIELD_DISPLAY_NAME:"displayName",FIELD_EMAIL:"email",FIELD_EULA_AGREEMENT:"termsConditionsAcceptance",FIELD_GENDER:"gender",FIELD_PASSWORD:"password",FIELD_PERSONAL_INFO_COLLECTION:"personalInfoAgree"};!function(e){e.ALREADY_EXISTS="already_exists",e.INVALID_ARGUMENT="invalid_argument",e.UNAVAILABLE="unavailable",e.UNKNOWN="unknown"}(To||(To={}));var ko=function(e,r){if(e instanceof mo){var t=e.details,n=t.code,o=t.title,i=t.body,a=n===po.NonRetryableError,s=function(e){var r=e.invalid_argument,t=e.already_exists,n=e.unavailable;return r?To.INVALID_ARGUMENT:t?To.ALREADY_EXISTS:n?To.UNAVAILABLE:To.UNKNOWN}(e.details);switch(s){case To.INVALID_ARGUMENT:var c=function(e){var r,t=null===(r=e.invalid_argument)||void 0===r?void 0:r.field_errors;if(t)return t.reduce((function(e,r){var t=r.field,n=r.message,o=Mo[t];return o&&(e[o]={code:"invalid_argument",message:n}),e}),{})}(e.details),u={code:s,title:o,message:i},l=c?(0,jr.ay)(c,r):void 0;return(0,jr.$K)(u,{isDisabled:a,fieldErrors:c,stepIndex:l});case To.ALREADY_EXISTS:var d={email:(0,jr.HL)(sr.ALREADY_IN_USE)},p={code:s};return(0,jr.$K)(p,{isDisabled:a,fieldErrors:d,stepIndex:0,showFormError:!1});default:var _={code:s,title:o,message:i};return(0,jr.$K)(_,{isDisabled:a})}}return(0,jr.$K)({code:To.UNKNOWN})},Go=Or.ZP.div.withConfig({displayName:"Divider__Wrapper",componentId:"nn1yjn-0"})(["width:100%;position:relative;display:flex;justify-content:center;&:before{content:' ';height:1px;background-color:",";display:block;position:absolute;top:50%;left:0;right:0;}"],(function(e){return(0,Ir.NE)(e.semanticColor)})),Wo=(0,Or.ZP)(mr.D).withConfig({displayName:"Divider__Label",componentId:"nn1yjn-1"})(["padding:0 ",";position:relative;display:inline-block;background:var( ",","," );"],Er.nu,(0,Ir.TY)("backgroundBase"),Ir.cv.background.base),Zo=function(e){var r=e.children,t=e.semanticColor,n=void 0===t?"essentialSubdued":t;return(0,l.jsx)(Go,{semanticColor:n,children:(0,l.jsx)(Wo,{children:r})})},Bo=["isFullscreen"];function Ko(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var Ho=function(e){var r=e.isFullscreen,t=(0,ct.Z)(e,Bo),n=r?c.Xw:c.$H;return(0,l.jsx)(n,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Ko(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ko(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},t))},Vo=t(39091),Yo=Or.ZP.div.withConfig({displayName:"Layout__Container",componentId:"kdy5ul-0"})(["width:100%;display:flex;justify-content:center;"]),qo=Or.ZP.div.withConfig({displayName:"Layout__Content",componentId:"kdy5ul-1"})(["display:",";width:100%;@media (min-width:","){width:",";}@media (min-width:768px){height:",";}"],(function(e){return e.isFullscreen?"flex":"block"}),Vo.DF,(function(e){return e.isFullscreen?"min-content":"324px"}),(function(e){return e.isFullscreen?"min-content":"auto"})),$o=function(e){var r=e.isFullscreen,t=e.children;return(0,l.jsx)(Yo,{children:(0,l.jsx)(qo,{isFullscreen:r,children:t})})},zo=Or.ZP.span.withConfig({displayName:"LoginLink__LinkContainer",componentId:"cg9g5x-0"})(["display:block;text-align:center;color:",";a{&,&:hover,&:active,&:focus{color:",";}}"],(0,Ir.NE)("textSubdued"),(0,Ir.NE)("textBase")),Xo=function(e){var r=e.onClick,t=(0,Fr.T)()("already_have_account",{$LOGIN_URL:(0,w.et)().loginUrl});return(0,l.jsx)(mr.D,{as:"p",variant:"ballad","data-testid":"login-link",onClick:function(e){r&&r(e)},children:(0,l.jsx)(zo,{dangerouslySetInnerHTML:{__html:t}})})},Jo=["isFullscreen"];function Qo(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}var ei=function(e){var r=e.isFullscreen,t=(0,ct.Z)(e,Jo),n=r?c.oM:c.kP;return(0,l.jsx)(n,function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Qo(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Qo(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}({},t))},ri=t(80158);function ti(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ni(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ti(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ti(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var oi=function(){return(0,l.jsxs)("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("circle",{cx:"12.5",cy:"12",r:"10",fill:"white"}),(0,l.jsx)("path",{d:"M22.5 12C22.5 6.477 18.023 2 12.5 2C6.977 2 2.5 6.477 2.5 12C2.5 16.991 6.157 21.128 10.938 21.878V14.891H8.398V12H10.938V9.797C10.938 7.291 12.43 5.907 14.715 5.907C15.808 5.907 16.953 6.102 16.953 6.102V8.562H15.693C14.45 8.562 14.063 9.333 14.063 10.125V12H16.836L16.393 14.89H14.063V21.878C18.843 21.128 22.5 16.991 22.5 12Z",fill:"#1877F2"})]})},ii=function(e){var r=(0,w.et)().facebookAccountsUrl,t=(0,Fr.T)(),n=b();(0,u.useEffect)((function(){n({type:"SIGNUP_FLOW_FACEBOOK_BUTTON_IMPRESSION"})}),[]);return(0,l.jsx)(ri.P,ni(ni({fullWidth:!0,iconLeading:oi,href:r,onClick:function(){n({type:"SIGNUP_FLOW_FACEBOOK_BUTTON_HIT",payload:{link:r}})},"data-testid":"idp-button-facebook"},e),{},{children:t("sign_up_facebook")}))};function ai(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function si(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?ai(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ai(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var ci=function(){return(0,l.jsxs)("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1 12.2272C22.1 11.5182 22.0364 10.8363 21.9182 10.1818H12.5V14.05H17.8818C17.65 15.3 16.9455 16.3591 15.8864 17.0682V19.5772H19.1182C21.0091 17.8363 22.1 15.2727 22.1 12.2272Z",fill:"#4285F4"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4998 21.9999C15.1998 21.9999 17.4635 21.1045 19.118 19.5772L15.8862 17.0681C14.9907 17.6681 13.8453 18.0227 12.4998 18.0227C9.89529 18.0227 7.69075 16.2636 6.90439 13.8999H3.56348V16.4908C5.20893 19.759 8.59075 21.9999 12.4998 21.9999Z",fill:"#34A853"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M6.90455 13.9C6.70455 13.3 6.59091 12.6591 6.59091 12C6.59091 11.3409 6.70455 10.7 6.90455 10.1V7.50909H3.56364C2.88636 8.85909 2.5 10.3864 2.5 12C2.5 13.6136 2.88636 15.1409 3.56364 16.4909L6.90455 13.9Z",fill:"#FBBC05"}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.4998 5.97727C13.968 5.97727 15.2862 6.48182 16.3226 7.47273L19.1907 4.60455C17.4589 2.99091 15.1953 2 12.4998 2C8.59075 2 5.20893 4.24091 3.56348 7.50909L6.90439 10.1C7.69075 7.73636 9.89529 5.97727 12.4998 5.97727Z",fill:"#EA4335"})]})},ui=function(e){var r=(0,w.et)().googleAccountsUrl,t=(0,Fr.T)(),n=b();(0,u.useEffect)((function(){n({type:"SIGNUP_FLOW_GOOGLE_BUTTON_IMPRESSION"})}),[]);return(0,l.jsx)(ri.P,si(si({fullWidth:!0,iconLeading:ci,"data-testid":"idp-button-google",href:r,onClick:function(){n({type:"SIGNUP_FLOW_GOOGLE_BUTTON_HIT",payload:{link:r}})}},e),{},{children:t("sign_up_google")}))},li=Or.ZP.div.withConfig({displayName:"ThirdPartyButtons__Wrapper",componentId:"fwgw92-0"})(["> * + *{margin-top:",";}"],Er.dl),di=(0,u.memo)((function(e){var r=e.isDisabled;return(0,l.jsxs)(li,{children:[(0,l.jsx)(ui,{disabled:r}),(0,l.jsx)(ii,{disabled:r})]})}));function pi(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function _i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?pi(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pi(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var fi=Or.ZP.header.withConfig({displayName:"SignupFlowEmail__Header",componentId:"sc-1hpj0jt-0"})(["margin-bottom:",";"],Er.mT),yi=Or.ZP.div.withConfig({displayName:"SignupFlowEmail__Footer",componentId:"sc-1hpj0jt-1"})(["margin-top:",";> * + *{margin-top:",";}"],Er.mG,Er.mG),Ei=function(e){var r=e.showTitle,t=void 0===r||r,n=e.showThirdPartyButtons,o=void 0===n||n,i=e.isDisabled,a=void 0!==i&&i,s=(0,Fr.T)(),c=b(),p=(0,d.useRouter)().query,_=(0,w.et)(),f=qe(),y=(0,N.Z)(_.forwardUrl),E=Uo(),O=(0,jr.rI)(jo,{isDisabled:a}),I=(0,de.Z)(O,2),m=I[0],v=I[1],g=m.stepIndex,S=g>0,P=g===E.length-1;$n(m,v),(0,u.useEffect)((function(){c({type:"SIGNUP_FLOW_EMAIL_IMPRESSION"})}),[]);var L=function(){return c({type:"SIGNUP_FLOW_EMAIL_SUCCESS_IMPRESSION"})},F=function(){return c({type:"SIGNUP_FLOW_EMAIL_CHALLENGE_IMPRESSION"})},D=function(){var e=(0,R.Z)(A().mark((function e(r){return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return v((0,jr.ip)(!0)),e.prev=1,e.next=4,Do(r,{appData:_,query:p,destinationUrl:y,signupFlags:f,logSuccessImpression:L,logChallengeImpression:F});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),v(ko(e.t0,E));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(r){return e.apply(this,arguments)}}();return(0,l.jsxs)($o,{isFullscreen:S,children:[!S&&t&&(0,l.jsx)(fi,{children:(0,l.jsx)(mr.D,{as:"h1",variant:"brio",children:s("new_signup_title")})}),(0,l.jsx)(jr.L0,{state:m,dispatch:v,steps:E,onComplete:D,onEvent:function(e){return c(function(e){return h(h({},e),{},{type:"SIGNUP_FLOW_EMAIL_".concat(e.type)})}(e))},children:function(e,r){return(0,l.jsx)(Ho,_i(_i({isFullscreen:S},e),{},{stepOffset:-1,children:r.map((function(e,r){return(0,l.jsx)(ei,_i({isGapReduced:P,isFullscreen:S},e),r)}))}))}}),!S&&(0,l.jsxs)(yi,{children:[o&&(0,l.jsxs)(u.Fragment,{children:[(0,l.jsx)(Zo,{children:s("or")}),(0,l.jsx)(di,{isDisabled:a})]}),(0,l.jsx)(Zo,{semanticColor:"decorativeSubdued"}),(0,l.jsx)(Xo,{onClick:function(){return c({type:"SIGNUP_FLOW_EMAIL_LOGIN_LINK_CLICK"})}})]})]})},hi={email:"",displayName:"",birthdate:pn.Nc,gender:dr.None,personalInfoAgree:!1,privacyPolicyAcceptance:!1,sendEmail:!1,termsConditionsAcceptance:!1,thirdPartyEmailAgree:!1,idToken:null,provider:null};function Oi(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Ii(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Oi(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oi(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var mi,vi=function(e){var r=(0,Fr.T)(),t=qe(),n=$e(),o=Ye(),i=ze(),a=Xe();return(0,u.useMemo)((function(){return function(e,r,t,n,o,i,a){var s,c=[];(null===(s=e.data)||void 0===s?void 0:s.provider)===je.FACEBOOK&&c.push({type:jr.fS.FIELD,id:"email",isRequired:!0,validate:vn,render:function(e){return(0,l.jsx)(Zr,Ii({isPhoneNumberMarket:!1},e))}}),c.push({type:jr.fS.FIELD,id:"displayName",isRequired:!0,validate:On,render:function(e){return(0,l.jsx)(rt,Ii({},e))}},{type:jr.fS.FIELD,id:"birthdate",isRequired:!0,validate:En(a),render:function(e){return(0,l.jsx)(et,Ii(Ii({},e),{},{endianness:i,minimumAge:a}))}},{type:jr.fS.FIELD,id:"gender",isRequired:!0,validate:gn(r),render:function(e){return(0,l.jsx)(st,Ii(Ii({},e),{},{signupFlags:r}))}});var u=r.canUsePhoneNumber,d=ro(r,t,n,u?[(0,l.jsx)(dn,{})]:void 0);return[{label:o("steps_form_confirm_title"),fields:c},{label:o("steps_form_terms_and_conditions_title"),buttonLabel:o("sign_up"),fields:d}]}(e,t,n,o,r,i,a)}),[e,t,n,o,r,i,a])},gi=function(e){return Object.keys(e)};!function(e){e.ALREADY_EXISTS="already_exists",e.INVALID_ARGUMENT="invalid_argument",e.UNAVAILABLE="unavailable",e.UNKNOWN="unknown"}(mi||(mi={}));var bi=function(e,r){var t=r.steps,n=r.loginUrl,o=r.t;if(e instanceof Ln)switch(e.code){case wn.INVALID_FORM_DATA:var i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return gi(e).reduce((function(r,t){var n=e[t];return n&&(r[t]={code:"invalid_argument",message:n}),r}),{})}(e.fieldErrors),a=i?(0,jr.ay)(i,t):void 0;return(0,jr.$K)({code:wn.INVALID_FORM_DATA},{fieldErrors:i,showFormError:!1,stepIndex:a});case wn.EMAIL_IS_ALREADY_IN_USE:var s=o("email_error_exists",{$LOGIN_URL:n});return(0,jr.$K)({code:wn.EMAIL_IS_ALREADY_IN_USE,message:s});case wn.GENERIC_ERROR:return(0,jr.$K)({code:wn.GENERIC_ERROR,message:e.errorMessage})}return(0,jr.$K)({code:wn.UNKNOWN})},Si=t(61436),wi=function(e){var r={},t=e.birthdate,n=e.gender,o=e.name,i=e.identifierToken,a=e.provider;if(i&&(r.idToken=i),a&&(r.provider=a),o&&(r.displayName=o),n&&(r.gender=function(e){switch(e){case Ce.MALE:return dr.Male;case Ce.FEMALE:return dr.Female;default:return dr.None}}(n)),t){var s=new Date(t);(0,Si.Z)(s)&&(r.birthdate=(0,pn.oP)(s))}return r},Ni=Or.ZP.div.withConfig({displayName:"Layout__Container",componentId:"sc-1anfd5-0"})(["width:100%;display:flex;justify-content:center;"]),Pi=Or.ZP.div.withConfig({displayName:"Layout__Content",componentId:"sc-1anfd5-1"})(["display:flex;width:100%;@media (min-width:","){width:min-content;}@media (min-width:768px){height:min-content;}"],Vo.DF),Ri=function(e){var r=e.children;return(0,l.jsx)(Ni,{children:(0,l.jsx)(Pi,{children:r})})};function Li(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Ai(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?Li(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Li(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var Fi=function(){var e=(0,Fr.T)(),r=b(),t=(0,w.et)(),n=qe(),o=t.loginUrl,i=t.forwardUrl,a=(0,N.Z)(i),s=function(){var e=(0,w.et)().flowId,r=(0,u.useState)(He),t=r[0],n=r[1],o=f().query,i=o.method,a=o.id_token;return(0,u.useEffect)((function(){Ke(a,i,e).then(n)}),[]),t}(),d=vi(s),p=(0,jr.rI)(hi,{isDisabled:!0}),_=(0,de.Z)(p,2),y=_[0],E=_[1],h=y.stepIndex===d.length-1;$n(y,E),(0,u.useEffect)((function(){r({type:"SIGNUP_FLOW_IDP_IMPRESSION"})}),[]),(0,u.useEffect)((function(){E(function(e,r){var t=r.t,n=r.loginUrl;switch(e.status){case De.SUCCESS:return(0,jr.Qg)(wi(e.data),{isDisabled:!1});case De.ERROR:var o=e.error,i={code:o};return o===xe.EMAIL_ALREADY_REGISTERED&&(i.message=t("email_error_exists",{$LOGIN_URL:n})),(0,jr.$K)(i,{isDisabled:!0,showFieldErrors:!1});default:return(0,jr.s0)(!0)}}(s,{t:e,loginUrl:o}))}),[s]);var O=function(){return r({type:"SIGNUP_FLOW_IDP_SUCCESS_IMPRESSION"})},m=function(){var r=(0,R.Z)(A().mark((function r(i){return A().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return E((0,jr.ip)(!0)),r.prev=1,r.next=4,Dn(i,{appData:t,signupFlags:n,destinationUrl:a,logSuccessImpression:O});case 4:r.next=9;break;case 6:r.prev=6,r.t0=r.catch(1),E(bi(r.t0,{t:e,loginUrl:o,steps:d}));case 9:case"end":return r.stop()}}),r,null,[[1,6]])})));return function(e){return r.apply(this,arguments)}}(),v=s.status===De.PENDING;return(0,l.jsx)(Ri,{children:(0,l.jsx)(jr.L0,{state:y,dispatch:E,steps:d,onComplete:m,onEvent:function(e){r(function(e){return I(I({},e),{},{type:"SIGNUP_FLOW_IDP_".concat(e.type)})}(e))},children:function(e,r){return(0,l.jsx)(c.Xw,Ai(Ai({showLoadingOverlay:v},e),{},{children:r.map((function(e,r){return(0,l.jsx)(c.oM,Ai({isGapReduced:h},e),r)}))}))}})})},Di=t(89381),ji=t(13161),Ci=t(92771),xi=t(32635),Ti=(0,Or.ZP)(Di.l).withConfig({displayName:"MarketMismatchDialog__Dialog",componentId:"ar5ide-0"})(["text-align:center;padding-block-start:",";"],Er.g4),Ui=Or.ZP.footer.withConfig({displayName:"MarketMismatchDialog__Footer",componentId:"ar5ide-1"})(["margin-block-start:",";display:flex;flex-direction:column;gap:",";"],Er.o7,Er.dl),Mi=function(e){var r=e.countryCode,t=e.geoCountry,n=e.geoCountryMarket,o=e.onClose,i=(0,w.et)().flowId,a=b(),s=(0,Fr.T)();return(0,l.jsx)(ji.Y,{center:!0,children:(0,l.jsx)(Ti,{id:"market-mismatch-dialog",colorSet:"invertedLight",dialogTitle:s("market_mismatch_title",{$COUNTRY:s("country_".concat(t.toLowerCase()))}),body:(0,l.jsxs)("div",{children:[(0,l.jsx)(mr.D,{as:"h3",variant:"mesto",children:s("market_mismatch_message")}),(0,l.jsxs)(Ui,{children:[(0,l.jsx)(Ci.D,{onClick:function(){a(function(e,r){return{type:"SIGNUP_FLOW_MARKET_MISMATCH_FOLLOW",payload:{countryCode:e,geoCountry:r}}}(r,t))},href:(0,xi.DN)("https://www.spotify.com/".concat(n,"/signup"),i),children:s("market_mismatch_submit")}),(0,l.jsx)(bt.o,{condensed:!0,onClick:function(){a(function(e,r){return{type:"SIGNUP_FLOW_MARKET_MISMATCH_DISMISS",payload:{countryCode:e,geoCountry:r}}}(r,t)),o()},children:s("market_mismatch_cancel")})]})]})})})},ki=Or.ZP.span.withConfig({displayName:"RecaptchaNote__Container",componentId:"sc-5l5tpz-0"})(["display:block;text-align:center;color:",";a{&,&:hover,&:active,&:focus{color:",";}}"],(0,Ir.NE)("textSubdued"),(0,Ir.NE)("textSubdued")),Gi=function(){return(0,l.jsx)(ki,{children:(0,l.jsxs)(mr.D,{as:"p",variant:"finale",children:["This site is protected by reCAPTCHA and the Google",(0,l.jsx)("br",{}),(0,l.jsx)("a",{href:"https://policies.google.com/privacy",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"})," ","and"," ",(0,l.jsx)("a",{href:"https://policies.google.com/terms",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})," ","apply."]})})},Wi=function(){var e=b(),r=qe().specificLicenses,t=(0,w.et)(),n=t.flow,o=t.countryCode,i=t.geoCountry,a=t.geoCountryMarket;(0,u.useEffect)((function(){e({type:"SIGNUP_FLOW_IMPRESSION"})}),[]);var s=function(){var e=!!(0,d.useRouter)().query.market_mismatch_dialog,r=(0,to.W6)(no.GJ);return e||r}()&&!!o&&!!i&&o.toLocaleLowerCase()!==i.toLocaleLowerCase(),p=(0,u.useState)(!1),_=p[0],f=p[1];(0,u.useEffect)((function(){s&&e(function(e,r){return{type:"SIGNUP_FLOW_MARKET_MISMATCH",payload:{countryCode:e,geoCountry:r}}}(o,i))}),[]);return(0,l.jsxs)(c.Ar,{footer:(0,l.jsx)(Gi,{}),children:[function(){if(n===w.Kn.ACCOUNTS)return(0,l.jsx)(Fi,{});var e=!r&&n!==w.Kn.EMAIL,t=n!==w.Kn.EMAIL;return(0,l.jsx)(Ei,{showTitle:e,showThirdPartyButtons:t,isDisabled:s})}(),s&&!_&&(0,l.jsx)(Mi,{countryCode:o,geoCountry:i,geoCountryMarket:a,onClose:function(){return f(!0)}})]})},Zi=t(38058),Bi=function(e){var r=e.language,t=e.market;return"\n  window.dataLayer = window.dataLayer || [];\n  window.dataLayer.push({\n    language: '".concat(r,"',\n    market: '").concat(t,"',\n    loggedIn: false,\n    userCountry: ''\n  });\n")},Ki=function(){var e=(0,w.et)(),r=e.cspNonce,t=e.language,n=e.market;return(0,u.useEffect)((function(){(0,Zi.track)({googleTagManagerId:"GTM-7BJJ",language:t,loggedIn:!1,market:n,oneTrust:!0})}),[t,n]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("script",{dangerouslySetInnerHTML:{__html:Bi({language:t,market:n})},nonce:r}),false]})},Hi=t(89275),Vi=t(57332),Yi=function(e,r,t){return(0,xi.A4)("accounts.spotify.com",["signup"].concat((0,zn.Z)(e)),r,t)},qi=function(e,r,t){var n=r.flowId,o=t.logNonAuthImpression,i=t.logNonAuthInteraction,a=(0,Vi.w)({data:{identifier:Yi(["start"],n,{new_signup:"1"})}});switch(e.type){case"SIGNUP_FLOW_FACEBOOK_BUTTON_IMPRESSION":return void o(a.externalIdentityProvidersFactory().providerButtonFactory({identifier:"facebook"}).impression());case"SIGNUP_FLOW_FACEBOOK_BUTTON_HIT":return void i(a.externalIdentityProvidersFactory().providerButtonFactory({identifier:"facebook"}).hitNavigateToExternalUri({destination:e.payload.link||""}));case"SIGNUP_FLOW_GOOGLE_BUTTON_IMPRESSION":return void o(a.externalIdentityProvidersFactory().providerButtonFactory({identifier:"google"}).impression());case"SIGNUP_FLOW_GOOGLE_BUTTON_HIT":return void i(a.externalIdentityProvidersFactory().providerButtonFactory({identifier:"google"}).hitNavigateToExternalUri({destination:e.payload.link||""}));default:return}},$i=t(38129),zi=t(70918),Xi=function(e,r,t){var n=r.flowId,o=r.destinationUrl,i=t.logNonAuthInteraction,a=t.logNonAuthImpression,s=(0,Vi.w)({data:{identifier:Yi(["start"],n,{new_signup:"1"})}});switch(e.type){case"SIGNUP_FLOW_EMAIL_IMPRESSION":return a(s.impression()),void a(s.emailSignupFormFactory().impression());case"SIGNUP_FLOW_EMAIL_LOGIN_LINK_CLICK":return void i(s.emailSignupFormFactory().loginLinkFactory().hitUiReveal());case"SIGNUP_FLOW_EMAIL_SUCCESS_IMPRESSION":return void a((0,zi.createWebSignupSuccessEventFactory)({data:{identifier:Yi(["success"],n,{new_signup:"1"})}}).impression());case"SIGNUP_FLOW_EMAIL_CHALLENGE_IMPRESSION":return void a((0,$i.createWebSignupChallengeEventFactory)({data:{identifier:Yi(["challenge"],n,{new_signup:"1"})}}).impression());case"SIGNUP_FLOW_EMAIL_FORM_COMPLETED":return void i(s.emailSignupFormFactory().submitButtonFactory().hitUiNavigate({destination:o}));case"SIGNUP_FLOW_EMAIL_FORM_ERROR":var c=e.payload.error,u=[c.title,c.message].filter(Boolean).join(" ")||"";return void a(s.emailSignupFormFactory().serverErrorFactory({reason:u}).impression());default:if("id"in e)switch(e.id){case"email":var l=s.emailSignupFormFactory().emailGroupFactory();switch(e.type){case"SIGNUP_FLOW_EMAIL_FIELD_FOCUSSED":return void i(l.emailInputFieldFactory().hitFocusInputField());case"SIGNUP_FLOW_EMAIL_FIELD_ERROR":var d=String(e.payload.error.code);return void a(l.emailInputFieldErrorFactory({reason:d}).impression());case"SIGNUP_FLOW_EMAIL_SUGGESTIONS_DISPLAYED":return void a(l.emailInputSuggestionsFactory().impression());case"SIGNUP_FLOW_EMAIL_SUGGESTION_SELECTED":var p=e.payload.position;return void i(l.emailInputSuggestionsFactory().suggestionButtonFactory({position:p}).hitUiSelect());default:return}case"password":var _=s.emailSignupFormFactory().passwordGroupFactory();switch(e.type){case"SIGNUP_FLOW_EMAIL_FIELD_FOCUSSED":return void i(_.passwordInputFieldFactory().hitFocusInputField());case"SIGNUP_FLOW_EMAIL_FIELD_ERROR":var f=String(e.payload.error.code);return void a(_.passwordInputFieldErrorFactory({reason:f}).impression());default:return}case"displayName":var y=s.emailSignupFormFactory().usernameGroupFactory();switch(e.type){case"SIGNUP_FLOW_EMAIL_FIELD_FOCUSSED":return void i(y.usernameInputFieldFactory().hitFocusInputField());case"SIGNUP_FLOW_EMAIL_FIELD_ERROR":var E=String(e.payload.error.code);return void a(y.usernameInputFieldErrorFactory({reason:E}).impression());default:return}case"birthdate":var h=s.emailSignupFormFactory().birthdateGroupFactory();switch(e.type){case"SIGNUP_FLOW_EMAIL_BIRTHDATE_FIELD_FOCUSSED":switch(e.payload.field){case"day":return void i(h.birthdateDayInputFieldFactory().hitFocusInputField());case"month":return void i(h.birthdateMonthSelectFactory().hitUiSelect());case"year":return void i(h.birthdateYearInputFieldFactory().hitFocusInputField());default:return}case"SIGNUP_FLOW_EMAIL_FIELD_ERROR":var O=String(e.payload.error.code);return a(h.birthdateDayInputFieldErrorFactory({reason:O}).impression()),a(h.birthdateMonthInputFieldErrorFactory({reason:O}).impression()),void a(h.birthdateYearInputFieldErrorFactory({reason:O}).impression());default:return}case"gender":var I=s.emailSignupFormFactory().genderGroupFactory();switch(e.type){case"SIGNUP_FLOW_EMAIL_FIELD_FOCUSSED":return void i(I.genderSelectFactory().hitUiSelect());case"SIGNUP_FLOW_EMAIL_FIELD_ERROR":var m=String(e.payload.error.code);return void a(I.genderInputFieldErrorFactory({reason:m}).impression());default:return}case"sendEmail":var v=s.emailSignupFormFactory().marketingOptinGroupFactory();return"SIGNUP_FLOW_EMAIL_FIELD_FOCUSSED"===e.type?void i(v.marketingOptinCheckboxFactory().hitUiSelect()):void 0;case"thirdPartyEmailAgree":var g=s.emailSignupFormFactory().thridPartyEmailGroupFactory();return"SIGNUP_FLOW_EMAIL_FIELD_FOCUSSED"===e.type?void i(g.thridPartyEmailCheckboxFactory().hitUiSelect()):void 0;case"personalInfoAgree":var b=s.emailSignupFormFactory().personalInfoGroupFactory();switch(e.type){case"SIGNUP_FLOW_EMAIL_FIELD_FOCUSSED":return void i(b.personalInfoCheckboxFactory().hitUiSelect());case"SIGNUP_FLOW_EMAIL_FIELD_ERROR":var S=String(e.payload.error.code);return void a(b.personalInfoCheckboxErrorFactory({reason:S}).impression());default:return}case"privacyPolicyAcceptance":var w=s.emailSignupFormFactory().privacyGroupFactory();switch(e.type){case"SIGNUP_FLOW_EMAIL_FIELD_FOCUSSED":return void i(w.privacyCheckboxFactory().hitUiSelect());case"SIGNUP_FLOW_EMAIL_FIELD_ERROR":var N=String(e.payload.error.code);return void a(w.privacyCheckboxErrorFactory({reason:N}).impression());default:return}case"termsConditionsAcceptance":var P=s.emailSignupFormFactory().termsAndConditionsGroupFactory();switch(e.type){case"SIGNUP_FLOW_EMAIL_FIELD_FOCUSSED":return void i(P.termsAndConditionsCheckboxFactory().hitUiSelect());case"SIGNUP_FLOW_EMAIL_FIELD_ERROR":var R=String(e.payload.error.code);return void a(P.termsAndConditionsCheckboxErrorFactory({reason:R}).impression());default:return}default:return}return}},Ji=t(27733),Qi=function(e,r,t){var n=r.flowId,o=r.destinationUrl,i=t.logNonAuthInteraction,a=t.logNonAuthImpression,s=(0,Ji.V)({data:{identifier:Yi(["confirmform"],n,{new_signup:"1"})}});switch(e.type){case"SIGNUP_FLOW_IDP_IMPRESSION":return void a(s.impression());case"SIGNUP_FLOW_IDP_SUCCESS_IMPRESSION":return void a((0,zi.createWebSignupSuccessEventFactory)({data:{identifier:Yi(["success"],n,{new_signup:"1"})}}).impression());case"SIGNUP_FLOW_IDP_FORM_COMPLETED":return void i(s.submitButtonFactory().hitUiNavigate({destination:o}));case"SIGNUP_FLOW_IDP_FORM_ERROR":var c=e.payload.error,u=[c.title,c.message].filter(Boolean).join(" ")||"";return void a(s.serverErrorFactory({reason:u}).impression());default:if("id"in e)switch(e.id){case"email":var l=s.emailGroupFactory();switch(e.type){case"SIGNUP_FLOW_IDP_FIELD_FOCUSSED":return void i(l.emailInputFieldFactory().hitFocusInputField());case"SIGNUP_FLOW_IDP_FIELD_ERROR":var d=String(e.payload.error.code);return void a(l.emailInputFieldErrorFactory({reason:d}).impression());case"SIGNUP_FLOW_IDP_SUGGESTIONS_DISPLAYED":return void a(l.emailInputSuggestionsFactory().impression());case"SIGNUP_FLOW_IDP_SUGGESTION_SELECTED":var p=e.payload.position;return void i(l.emailInputSuggestionsFactory().suggestionButtonFactory({position:p}).hitUiSelect());default:return}case"displayName":var _=s.usernameGroupFactory();switch(e.type){case"SIGNUP_FLOW_IDP_FIELD_FOCUSSED":return void i(_.usernameInputFieldFactory().hitFocusInputField());case"SIGNUP_FLOW_IDP_FIELD_ERROR":var f=String(e.payload.error.code);return void a(_.usernameInputFieldErrorFactory({reason:f}).impression());default:return}case"birthdate":var y=s.birthdateGroupFactory();switch(e.type){case"SIGNUP_FLOW_IDP_BIRTHDATE_FIELD_FOCUSSED":switch(e.payload.field){case"day":return void i(y.birthdateDayInputFieldFactory().hitFocusInputField());case"month":return void i(y.birthdateMonthSelectFactory().hitUiSelect());case"year":return void i(y.birthdateYearInputFieldFactory().hitFocusInputField());default:return}case"SIGNUP_FLOW_IDP_FIELD_ERROR":var E=String(e.payload.error.code);return a(y.birthdateDayInputFieldErrorFactory({reason:E}).impression()),a(y.birthdateMonthInputFieldErrorFactory({reason:E}).impression()),void a(y.birthdateYearInputFieldErrorFactory({reason:E}).impression());default:return}case"gender":var h=s.genderGroupFactory();switch(e.type){case"SIGNUP_FLOW_IDP_FIELD_FOCUSSED":return void i(h.genderSelectFactory().hitUiSelect());case"SIGNUP_FLOW_IDP_FIELD_ERROR":var O=String(e.payload.error.code);return void a(h.genderInputFieldErrorFactory({reason:O}).impression());default:return}case"sendEmail":var I=s.marketingOptinGroupFactory();return"SIGNUP_FLOW_IDP_FIELD_FOCUSSED"===e.type?void i(I.marketingOptinCheckboxFactory().hitUiSelect()):void 0;case"thirdPartyEmailAgree":var m=s.thridPartyEmailGroupFactory();return"SIGNUP_FLOW_IDP_FIELD_FOCUSSED"===e.type?void i(m.thridPartyEmailCheckboxFactory().hitUiSelect()):void 0;case"personalInfoAgree":var v=s.personalInfoGroupFactory();switch(e.type){case"SIGNUP_FLOW_IDP_FIELD_FOCUSSED":return void i(v.personalInfoCheckboxFactory().hitUiSelect());case"SIGNUP_FLOW_IDP_FIELD_ERROR":var g=String(e.payload.error.code);return void a(v.personalInfoCheckboxErrorFactory({reason:g}).impression());default:return}case"privacyPolicyAcceptance":var b=s.privacyGroupFactory();switch(e.type){case"SIGNUP_FLOW_IDP_FIELD_FOCUSSED":return void i(b.privacyCheckboxFactory().hitUiSelect());case"SIGNUP_FLOW_IDP_FIELD_ERROR":var S=String(e.payload.error.code);return void a(b.privacyCheckboxErrorFactory({reason:S}).impression());default:return}case"termsConditionsAcceptance":var w=s.termsAndConditionsGroupFactory();switch(e.type){case"SIGNUP_FLOW_IDP_FIELD_FOCUSSED":return void i(w.termsAndConditionsCheckboxFactory().hitUiSelect());case"SIGNUP_FLOW_IDP_FIELD_ERROR":var N=String(e.payload.error.code);return void a(w.termsAndConditionsCheckboxErrorFactory({reason:N}).impression());default:return}default:return}return}},ea=function(e){var r=e.children,t=(0,Hi.Yk)(),n=(0,w.et)(),o=n.forwardUrl,i={flowId:n.flowId,destinationUrl:(0,N.Z)(o)};return S((function(e){return function(e,r,t){return Object.values(a).forEach((function(n){return n(e,r,t)}))}(e,i,t)})),(0,l.jsx)(u.Fragment,{children:r})},ra=t(395);var ta=function(e){return function(r,t){return r.replace(t,e[t])}},na=t(59087);function oa(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function ia(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?oa(Object(t),!0).forEach((function(r){(0,s.Z)(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):oa(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var aa=!0,sa=function(e){var r=e.data,t=r.campaignReferrer,n=r.spT,o=r.forwardUrl,i=r.flowId;!function(e,r,t){(0,u.useEffect)((function(){(0,R.Z)(A().mark((function n(){return A().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,V.PL)(e,r,t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})))()}),[e,r,t])}(t,(0,N.Z)(o),i);var a=r.translations,s=r.remoteConfig;(0,u.useEffect)((function(){T.t.connect()}),[]);var d=(0,u.useMemo)((function(){var e=function(e){return function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r in e?Object.keys(t).reduce(ta(t),e[r]):r}}(a);return ia(ia({},r),{},{getTranslationString:e})}),[r,a]);return(0,l.jsx)("main",{children:(0,l.jsx)(c.SV,{spT:n,children:(0,l.jsx)(xi.GU,{flowId:i,children:(0,l.jsx)(na.Z,{remoteConfig:s,spT:n,children:(0,l.jsx)(w.R0.Provider,{value:d,children:(0,l.jsx)(Hi.jZ,{children:(0,l.jsx)(Zn,{children:(0,l.jsxs)(ra.u,{children:[(0,l.jsx)(c.NR,{}),(0,l.jsx)(Ki,{}),(0,l.jsx)(g,{children:(0,l.jsx)(Vn,{children:(0,l.jsx)(H,{children:(0,l.jsx)(ea,{children:(0,l.jsx)(kn,{children:(0,l.jsx)(Wi,{})})})})})})]})})})})})})})})}},12679:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/signup",function(){return t(90300)}])}},function(e){e.O(0,[714,87,869,427,774,888,179],(function(){return r=12679,e(e.s=r);var r}));var r=e.O();_N_E=r}]);